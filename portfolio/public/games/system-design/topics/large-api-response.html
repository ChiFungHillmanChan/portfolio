<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Large API Response è™•ç†ç­–ç•¥</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang HK", "Microsoft JhengHei", sans-serif; background: #0f1117; color: #e0e0e0; min-height: 100vh; }
    .container { max-width: 960px; margin: 0 auto; padding: 40px 24px; }
    header { text-align: center; margin-bottom: 40px; }
    header h1 { font-size: 2rem; font-weight: 700; color: #ffffff; margin-bottom: 8px; }
    header p { font-size: 1rem; color: #9ca3af; line-height: 1.6; }
    .card { background: #1a1d27; border-radius: 16px; padding: 32px; margin-bottom: 24px; border: 1px solid #2a2d3a; }
    .card h2 { font-size: 1.5rem; color: #ffffff; margin-bottom: 8px; }
    .card .subtitle { font-size: 0.95rem; color: #6366f1; font-weight: 500; margin-bottom: 16px; }
    .card p { font-size: 0.95rem; color: #c0c4cc; line-height: 1.8; margin-bottom: 12px; }
    .diagram-container { background: #13151c; border-radius: 12px; padding: 24px; margin: 24px 0; overflow-x: auto; border: 1px solid #2a2d3a; }
    .diagram-container svg { display: block; margin: 0 auto; max-width: 100%; height: auto; }
    .steps { list-style: none; padding: 0; margin: 16px 0; }
    .steps li { display: flex; align-items: flex-start; gap: 12px; padding: 12px 0; border-bottom: 1px solid #2a2d3a; font-size: 0.95rem; color: #c0c4cc; line-height: 1.6; }
    .steps li:last-child { border-bottom: none; }
    .step-num { flex-shrink: 0; width: 28px; height: 28px; border-radius: 50%; background: #6366f1; color: #fff; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; }
    .key-points { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 16px; }
    @media (max-width: 600px) { .key-points { grid-template-columns: 1fr; } .container { padding: 24px 16px; } header h1 { font-size: 1.5rem; } .card { padding: 20px; } }
    .key-point { background: #13151c; border-radius: 10px; padding: 16px; border-left: 3px solid #6366f1; }
    .key-point h4 { color: #a5b4fc; font-size: 0.9rem; margin-bottom: 6px; }
    .key-point p { font-size: 0.85rem; color: #c0c4cc; margin-bottom: 0; line-height: 1.6; }
    .use-case { background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(99, 102, 241, 0.05)); border-left: 3px solid #6366f1; border-radius: 0 10px 10px 0; padding: 16px 20px; margin-top: 16px; }
    .use-case h4 { color: #a5b4fc; font-size: 0.9rem; margin-bottom: 6px; }
    .use-case p { font-size: 0.9rem; color: #c0c4cc; margin-bottom: 0; }
    .tabs { display: flex; gap: 4px; background: #1a1d27; border-radius: 12px; padding: 4px; margin-bottom: 24px; overflow-x: auto; }
    .tab-btn { flex: 1; padding: 12px 16px; border: none; background: transparent; color: #9ca3af; font-size: 0.9rem; font-weight: 500; border-radius: 8px; cursor: pointer; transition: all 0.25s ease; white-space: nowrap; font-family: inherit; }
    .tab-btn:hover { color: #e0e0e0; background: rgba(255, 255, 255, 0.05); }
    .tab-btn.active { background: #6366f1; color: #ffffff; font-weight: 600; }
    .tab-content { display: none; animation: fadeIn 0.3s ease; }
    .tab-content.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
    /* AI Viber */
    .prompt-card { background: #13151c; border-radius: 12px; padding: 20px; margin-bottom: 16px; border: 1px solid #2a2d3a; }
    .prompt-card h4 { color: #a5b4fc; font-size: 0.95rem; margin-bottom: 12px; }
    .prompt-text { background: #0a0b10; border-radius: 8px; padding: 16px; font-size: 0.85rem; color: #c0c4cc; line-height: 1.8; white-space: pre-wrap; word-break: break-word; border: 1px solid #2a2d3a; position: relative; }
    .prompt-text .placeholder { color: #fbbf24; font-weight: 600; }
    .copy-btn { margin-top: 10px; padding: 8px 16px; background: #6366f1; color: #fff; border: none; border-radius: 8px; font-size: 0.8rem; cursor: pointer; font-family: inherit; transition: all 0.2s ease; }
    .copy-btn:hover { background: #4f46e5; }
    .copy-btn.copied { background: #10B981; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Large API Response è™•ç†ç­–ç•¥</h1>
      <p>ç•¶ API éœ€è¦å›å‚³å¤§é‡æ•¸æ“šï¼Œé»æ¨£æœ‰æ•ˆå’è™•ç†åŒå„ªåŒ–å›æ‡‰</p>
    </header>

    <div class="tabs">
      <button class="tab-btn active" data-tab="pagination">â‘  åˆ†é è™•ç†</button>
      <button class="tab-btn" data-tab="compression">â‘¡ æ•¸æ“šå£“ç¸®</button>
      <button class="tab-btn" data-tab="offload">â‘¢ S3 å¸è¼‰</button>
      <button class="tab-btn" data-tab="ai-viber">â‘£ AI Viber</button>
    </div>

    <!-- ==================== TAB 1: PAGINATION ==================== -->
    <div id="pagination" class="tab-content active">
      <div class="card">
        <h2>Pagination åˆ†é è™•ç†</h2>
        <div class="subtitle">å°‡å¤§é‡æ•¸æ“šæ‹†æˆç´°ä»½ï¼Œæ¯æ¬¡åªå›å‚³ä¸€é </div>
        <p>
          æ¦‚å¿µå¥½ç°¡å–® â€” å°±å¥½ä¼¼ Google æœå°‹çµæœå’ï¼Œå””æœƒä¸€æ¬¡éé¡¯ç¤ºå¹¾ç™¾è¬å€‹çµæœï¼Œè€Œä¿‚æ¯é åªé¡¯ç¤º 10 æ¢ã€‚
          API éƒ½ä¿‚ä¸€æ¨£ï¼Œç•¶æœ‰å¤§é‡ record éœ€è¦å›å‚³å˜…æ™‚å€™ï¼Œæœ€å¸¸è¦‹å˜…åšæ³•ä¿‚ç”¨ Pagination å°‡æ•¸æ“šåˆ‡é–‹ï¼Œ
          æ¯æ¬¡ request åªå›å‚³æŒ‡å®šæ•¸é‡å˜…è³‡æ–™ã€‚
        </p>
        <p>
          é‡é»ä¿‚ï¼šå””å¥½ä¸€æ¬¡é load æ™’æ‰€æœ‰å˜¢ã€‚æ¯å€‹ page åªåŒ…å«å›ºå®šæ•¸é‡å˜… itemï¼ˆä¾‹å¦‚ 20 æ¢ï¼‰ï¼Œ
          client éœ€è¦æ›´å¤šå°±å† request ä¸‹ä¸€é ã€‚å’æ¨£å¯ä»¥å¤§å¹…æ¸›å°‘æ¯æ¬¡ response å˜… payload sizeï¼Œ
          äº¦éƒ½é™ä½ server åŒ database å˜…å£“åŠ›ã€‚
        </p>

        <div class="diagram-container">
          <svg viewBox="0 0 700 340" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="pg-client-grad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#6366f1" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#1e293b"/>
              </linearGradient>
              <linearGradient id="pg-server-grad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#10B981" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#1e293b"/>
              </linearGradient>
              <linearGradient id="pg-db-grad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#f59e0b" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#1e293b"/>
              </linearGradient>
              <linearGradient id="pg-page-grad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#a5b4fc" stop-opacity="0.3"/>
                <stop offset="100%" stop-color="#1e293b"/>
              </linearGradient>
              <filter id="pg-glow">
                <feGaussianBlur stdDeviation="4" result="blur"/>
                <feFlood flood-color="#6366f1" flood-opacity="0.4" result="color"/>
                <feComposite in="color" in2="blur" operator="in" result="glow"/>
                <feMerge>
                  <feMergeNode in="glow"/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
              <filter id="pg-shadow">
                <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.4"/>
              </filter>
              <marker id="pg-arrow-blue" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
                <polygon points="0 0, 10 3.5, 0 7" fill="#6366f1"/>
              </marker>
              <marker id="pg-arrow-green" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
                <polygon points="0 0, 10 3.5, 0 7" fill="#34d399"/>
              </marker>
            </defs>

            <!-- Client -->
            <rect x="30" y="50" width="130" height="56" rx="14" fill="url(#pg-client-grad)" stroke="#6366f1" stroke-width="1.5" filter="url(#pg-glow)"/>
            <text x="95" y="83" text-anchor="middle" fill="#e0e0e0" font-size="14" font-weight="600">Client</text>

            <!-- API Server -->
            <rect x="280" y="50" width="140" height="56" rx="14" fill="url(#pg-server-grad)" stroke="#10B981" stroke-width="1.5" filter="url(#pg-shadow)"/>
            <text x="350" y="83" text-anchor="middle" fill="#e0e0e0" font-size="14" font-weight="600">API Server</text>

            <!-- Database -->
            <rect x="540" y="50" width="130" height="56" rx="14" fill="url(#pg-db-grad)" stroke="#f59e0b" stroke-width="1.5" filter="url(#pg-shadow)"/>
            <text x="605" y="83" text-anchor="middle" fill="#e0e0e0" font-size="14" font-weight="600">Database</text>

            <!-- Arrow: Client -> Server -->
            <path d="M160,70 C210,70 230,70 278,70" stroke="#6366f1" stroke-width="1.8" fill="none" marker-end="url(#pg-arrow-blue)"/>
            <text x="219" y="62" text-anchor="middle" fill="#9ca3af" font-size="11">GET /items?page=1</text>

            <!-- Arrow: Server -> DB -->
            <path d="M420,78 C470,78 490,78 538,78" stroke="#f59e0b" stroke-width="1.8" fill="none" marker-end="url(#pg-arrow-blue)"/>
            <text x="479" y="70" text-anchor="middle" fill="#9ca3af" font-size="11">LIMIT 20 OFFSET 0</text>

            <!-- Page results -->
            <rect x="170" y="160" width="120" height="48" rx="14" fill="url(#pg-page-grad)" stroke="#a5b4fc" stroke-width="1" filter="url(#pg-shadow)"/>
            <text x="230" y="188" text-anchor="middle" fill="#a5b4fc" font-size="12" font-weight="600">Page 1 (1-20)</text>

            <rect x="310" y="160" width="120" height="48" rx="14" fill="url(#pg-page-grad)" stroke="#a5b4fc" stroke-width="1" filter="url(#pg-shadow)"/>
            <text x="370" y="188" text-anchor="middle" fill="#a5b4fc" font-size="12" font-weight="600">Page 2 (21-40)</text>

            <rect x="450" y="160" width="120" height="48" rx="14" fill="url(#pg-page-grad)" stroke="#a5b4fc" stroke-width="1" filter="url(#pg-shadow)"/>
            <text x="510" y="188" text-anchor="middle" fill="#a5b4fc" font-size="12" font-weight="600">Page 3 (41-60)</text>

            <!-- Arrow: Server down to pages -->
            <path d="M350,106 C350,128 310,140 290,158" stroke="#34d399" stroke-width="1.5" fill="none" marker-end="url(#pg-arrow-green)" stroke-dasharray="5,3"/>
            <path d="M350,106 C350,128 350,140 370,158" stroke="#34d399" stroke-width="1.5" fill="none" marker-end="url(#pg-arrow-green)" stroke-dasharray="5,3"/>
            <path d="M350,106 C350,128 430,140 450,158" stroke="#34d399" stroke-width="1.5" fill="none" marker-end="url(#pg-arrow-green)" stroke-dasharray="5,3"/>

            <!-- Response arrow back -->
            <path d="M280,92 C230,92 210,100 162,100" stroke="#34d399" stroke-width="1.8" fill="none" marker-end="url(#pg-arrow-green)"/>
            <text x="219" y="114" text-anchor="middle" fill="#9ca3af" font-size="11">20 items + nextPage</text>

            <!-- Legend -->
            <rect x="170" y="240" width="360" height="76" rx="12" fill="#13151c" stroke="#2a2d3a" stroke-width="1"/>
            <text x="350" y="262" text-anchor="middle" fill="#9ca3af" font-size="12">Response payload:</text>
            <text x="350" y="282" text-anchor="middle" fill="#a5b4fc" font-size="11" font-family="monospace">{ "data": [...20 items], "page": 1, "totalPages": 50,</text>
            <text x="350" y="300" text-anchor="middle" fill="#a5b4fc" font-size="11" font-family="monospace">  "nextPage": "/items?page=2" }</text>
          </svg>
        </div>

        <ol class="steps">
          <li>
            <span class="step-num">1</span>
            <span>Client ç™¼é€ request ä¸¦å¸¶ä¸Š page number åŒ page size åƒæ•¸ï¼ˆä¾‹å¦‚ <code>?page=1&amp;size=20</code>ï¼‰</span>
          </li>
          <li>
            <span class="step-num">2</span>
            <span>API Server æ”¶åˆ°å¾Œï¼Œå°‡åƒæ•¸è½‰æ›æˆ SQL query å˜… LIMIT åŒ OFFSETï¼Œåªå¾ Database è®€å–æŒ‡å®šç¯„åœå˜… record</span>
          </li>
          <li>
            <span class="step-num">3</span>
            <span>Server å›å‚³å—°ä¸€é å˜…æ•¸æ“šï¼Œé€£åŒ metadataï¼ˆä¾‹å¦‚ç¸½é æ•¸ã€ä¸‹ä¸€é å˜… linkï¼‰ä¸€é½Šé€è¿”ç•€ Client</span>
          </li>
          <li>
            <span class="step-num">4</span>
            <span>Client éœ€è¦æ›´å¤šæ•¸æ“šå˜…æ™‚å€™ï¼Œå† request ä¸‹ä¸€é  â€” é‡è¤‡ä»¥ä¸Šæµç¨‹</span>
          </li>
        </ol>

        <div class="key-points">
          <div class="key-point">
            <h4>Offset-based Pagination</h4>
            <p>ç”¨ page number + page size åšåƒæ•¸ã€‚å¯¦ç¾ç°¡å–®ï¼Œä½†ç•¶æ•¸æ“šé‡å¥½å¤§å˜…æ™‚å€™ï¼Œ<code>OFFSET</code> å€¼è¶Šå¤§ query è¶Šæ…¢ï¼Œå› ç‚º database è¦ skip å¤§é‡ rowã€‚</p>
          </div>
          <div class="key-point">
            <h4>Cursor-based Pagination</h4>
            <p>ç”¨ä¸Šä¸€é æœ€å¾Œä¸€æ¢ record å˜… ID åš cursorï¼Œquery ç›´æ¥å¾å—°å€‹ä½ç½®é–‹å§‹ã€‚æ•ˆèƒ½ç©©å®šï¼Œé©åˆå¤§é‡æ•¸æ“šåŒ real-time feed å ´æ™¯ã€‚</p>
          </div>
          <div class="key-point">
            <h4>Response çµæ§‹</h4>
            <p>æ¨™æº–åšæ³•ä¿‚å–º response å…¥é¢åŒ…å« <code>nextPage</code>ã€<code>totalItems</code>ã€<code>hasMore</code> ç­‰ metadataï¼Œç­‰ client çŸ¥é“ä»²æœ‰å†‡æ•¸æ“šã€‚</p>
          </div>
          <div class="key-point">
            <h4>é©ç”¨å ´æ™¯</h4>
            <p>æœå°‹çµæœã€åˆ—è¡¨é é¢ã€æ­·å²ç´€éŒ„ â€” ä»»ä½•éœ€è¦é€æ­¥è¼‰å…¥å¤§é‡ record å˜… API endpoint éƒ½é©åˆç”¨ Paginationã€‚</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ==================== TAB 2: COMPRESSION ==================== -->
    <div id="compression" class="tab-content">
      <div class="card">
        <h2>Compression æ•¸æ“šå£“ç¸®</h2>
        <div class="subtitle">å£“ç¸®ä¹‹å¾Œå…ˆå‚³è¼¸ï¼Œå¤§å¹…æ¸›å°‘ç¶²çµ¡ bandwidth æ¶ˆè€—</div>
        <p>
          æ¦‚å¿µåŒå£“ç¸®æª”æ¡ˆå† send email ä¸€æ¨¡ä¸€æ¨£ã€‚å–º server ç«¯å°‡ response body å£“ç¸®ä¹‹å¾Œå…ˆå‚³é€ç•€ clientï¼Œ
          client æ”¶åˆ°ä¹‹å¾Œå†è§£å£“ã€‚ç‰¹åˆ¥ä¿‚ JSON response å‘¢é¡æ–‡å­—æ•¸æ“šï¼Œå£“ç¸®ç‡å¯ä»¥å»åˆ° 70-90%ï¼Œ
          æ•ˆæœéå¸¸é¡¯è‘—ã€‚
        </p>
        <p>
          é—œéµåœ¨æ–¼ HTTP æœ¬èº«å°±å…§å»ºå’—å£“ç¸®æ©Ÿåˆ¶ â€” client å–º request header åŠ  <code>Accept-Encoding: gzip, br</code>ï¼Œ
          server å°±çŸ¥é“ client æ”¯æ´é‚Šç¨®å£“ç¸®æ ¼å¼ï¼Œç„¶å¾Œç”¨å°æ‡‰å˜…æ¼”ç®—æ³•å£“ç¸® responseï¼Œ
          å†å–º response header åŠ  <code>Content-Encoding: gzip</code> è©±ç•€ client çŸ¥ã€‚
        </p>

        <div class="diagram-container">
          <svg viewBox="0 0 700 320" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="cp-client-grad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#6366f1" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#1e293b"/>
              </linearGradient>
              <linearGradient id="cp-server-grad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#10B981" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#1e293b"/>
              </linearGradient>
              <linearGradient id="cp-big-grad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#f87171" stop-opacity="0.35"/>
                <stop offset="100%" stop-color="#1e293b"/>
              </linearGradient>
              <linearGradient id="cp-small-grad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#34d399" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#1e293b"/>
              </linearGradient>
              <filter id="cp-glow-green">
                <feGaussianBlur stdDeviation="4" result="blur"/>
                <feFlood flood-color="#10B981" flood-opacity="0.35" result="color"/>
                <feComposite in="color" in2="blur" operator="in" result="glow"/>
                <feMerge>
                  <feMergeNode in="glow"/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
              <filter id="cp-shadow">
                <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.4"/>
              </filter>
              <marker id="cp-arrow-blue" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
                <polygon points="0 0, 10 3.5, 0 7" fill="#6366f1"/>
              </marker>
              <marker id="cp-arrow-green" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
                <polygon points="0 0, 10 3.5, 0 7" fill="#34d399"/>
              </marker>
            </defs>

            <!-- Client -->
            <rect x="30" y="60" width="130" height="56" rx="14" fill="url(#cp-client-grad)" stroke="#6366f1" stroke-width="1.5" filter="url(#cp-shadow)"/>
            <text x="95" y="85" text-anchor="middle" fill="#e0e0e0" font-size="13" font-weight="600">Client</text>
            <text x="95" y="102" text-anchor="middle" fill="#9ca3af" font-size="10">(Browser / App)</text>

            <!-- Server -->
            <rect x="490" y="60" width="160" height="56" rx="14" fill="url(#cp-server-grad)" stroke="#10B981" stroke-width="1.5" filter="url(#cp-glow-green)"/>
            <text x="570" y="85" text-anchor="middle" fill="#e0e0e0" font-size="13" font-weight="600">API Server</text>
            <text x="570" y="102" text-anchor="middle" fill="#9ca3af" font-size="10">(gzip / brotli)</text>

            <!-- Request arrow -->
            <path d="M160,72 C260,72 340,72 488,72" stroke="#6366f1" stroke-width="1.8" fill="none" marker-end="url(#cp-arrow-blue)"/>
            <text x="325" y="62" text-anchor="middle" fill="#a5b4fc" font-size="11">Accept-Encoding: gzip, br</text>

            <!-- Original size box -->
            <rect x="310" y="140" width="140" height="50" rx="14" fill="url(#cp-big-grad)" stroke="#f87171" stroke-width="1" filter="url(#cp-shadow)"/>
            <text x="380" y="162" text-anchor="middle" fill="#f87171" font-size="12" font-weight="600">Original: 2.5 MB</text>
            <text x="380" y="179" text-anchor="middle" fill="#9ca3af" font-size="10">Raw JSON response</text>

            <!-- Compressed size box -->
            <rect x="310" y="210" width="140" height="50" rx="14" fill="url(#cp-small-grad)" stroke="#34d399" stroke-width="1" filter="url(#cp-shadow)"/>
            <text x="380" y="232" text-anchor="middle" fill="#34d399" font-size="12" font-weight="600">Compressed: 250 KB</text>
            <text x="380" y="249" text-anchor="middle" fill="#9ca3af" font-size="10">gzip compressed</text>

            <!-- Reduction arrow -->
            <path d="M380,190 L380,208" stroke="#fbbf24" stroke-width="2" fill="none" marker-end="url(#cp-arrow-green)"/>
            <text x="435" y="204" fill="#fbbf24" font-size="11" font-weight="600">-90%</text>

            <!-- Response arrow (compressed) -->
            <path d="M490,100 C380,100 270,130 162,100" stroke="#34d399" stroke-width="2.5" fill="none" marker-end="url(#cp-arrow-green)"/>
            <text x="325" y="120" text-anchor="middle" fill="#34d399" font-size="11" font-weight="500">Content-Encoding: gzip (250 KB)</text>

            <!-- Legend -->
            <rect x="100" y="270" width="500" height="36" rx="10" fill="#13151c" stroke="#2a2d3a" stroke-width="1"/>
            <circle cx="150" cy="288" r="6" fill="#f87171"/>
            <text x="165" y="292" fill="#9ca3af" font-size="11">æœªå£“ç¸® (2.5 MB)</text>
            <circle cx="320" cy="288" r="6" fill="#34d399"/>
            <text x="335" y="292" fill="#9ca3af" font-size="11">å£“ç¸®å¾Œ (250 KB)</text>
            <text x="500" y="292" fill="#fbbf24" font-size="11" font-weight="600">ç¯€çœ 90% bandwidth</text>
          </svg>
        </div>

        <ol class="steps">
          <li>
            <span class="step-num">1</span>
            <span>Client ç™¼é€ request æ™‚ï¼Œå–º header åŠ å…¥ <code>Accept-Encoding: gzip, br</code>ï¼Œè¡¨ç¤ºæ”¯æ´å£“ç¸®æ ¼å¼</span>
          </li>
          <li>
            <span class="step-num">2</span>
            <span>Server ç”Ÿæˆ response ä¹‹å¾Œï¼Œç”¨ gzip æˆ– brotli æ¼”ç®—æ³•å£“ç¸® response body</span>
          </li>
          <li>
            <span class="step-num">3</span>
            <span>å£“ç¸®å¾Œå˜…æ•¸æ“šé€£åŒ <code>Content-Encoding</code> header ä¸€é½Šå‚³è¿”ç•€ Client</span>
          </li>
          <li>
            <span class="step-num">4</span>
            <span>Clientï¼ˆbrowser æˆ– HTTP libraryï¼‰è‡ªå‹•æ ¹æ“š header è§£å£“æ•¸æ“šï¼Œæ‡‰ç”¨å±¤é¢å®Œå…¨é€æ˜</span>
          </li>
        </ol>

        <div class="key-points">
          <div class="key-point">
            <h4>gzip</h4>
            <p>æœ€æ™®åŠå˜… HTTP å£“ç¸®æ ¼å¼ï¼Œå¹¾ä¹æ‰€æœ‰ browser åŒ server éƒ½æ”¯æ´ã€‚å£“ç¸®ç‡é«˜ï¼ŒCPU é–‹éŠ·åˆç†ï¼Œé©åˆå¤§éƒ¨åˆ†å ´æ™¯ã€‚</p>
          </div>
          <div class="key-point">
            <h4>Brotli (br)</h4>
            <p>Google é–‹ç™¼å˜…è¼ƒæ–°å£“ç¸®æ¼”ç®—æ³•ï¼Œå£“ç¸®ç‡æ¯” gzip é«˜ 15-25%ã€‚å£“ç¸®é€Ÿåº¦ç¨æ…¢ï¼Œä½†è§£å£“é€Ÿåº¦å¿«ï¼Œé©åˆéœæ…‹è³‡æºã€‚</p>
          </div>
          <div class="key-point">
            <h4>é©ç”¨ç¯„åœ</h4>
            <p>æ–‡å­—é¡æ•¸æ“šï¼ˆJSONã€HTMLã€CSVï¼‰å£“ç¸®æ•ˆæœæœ€å¥½ã€‚åœ–ç‰‡ã€å½±ç‰‡ç­‰å·²ç¶“å£“ç¸®éå˜… binary æ•¸æ“šå†å£“ç¸®æ”¶æ•ˆç”šå¾®ã€‚</p>
          </div>
          <div class="key-point">
            <h4>æ³¨æ„äº‹é …</h4>
            <p>å£“ç¸®æœƒæ¶ˆè€— server CPUï¼Œé«˜æµé‡å ´æ™¯å»ºè­°ç”¨ reverse proxyï¼ˆå¦‚ Nginxï¼‰è² è²¬å£“ç¸®ï¼Œé¿å… application server è² æ“”éé‡ã€‚</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ==================== TAB 3: S3 OFFLOADING ==================== -->
    <div id="offload" class="tab-content">
      <div class="card">
        <h2>S3 Offloading å¸è¼‰åˆ° Object Storage</h2>
        <div class="subtitle">ç•¶å£“ç¸®éƒ½å””å¤ ç”¨ï¼Œå°‡æ•¸æ“šä¸Šå‚³åˆ° S3 å†ç•€ client è‡ªå·±ä¸‹è¼‰</div>
        <p>
          æœ‰æ™‚å€™å°±ç®—åšå’— Compressionï¼Œresponse ä¾ç„¶å¤ªå¤§ã€‚ä¾‹å¦‚è¦åŒ¯å‡ºå¹¾åè¬è¡Œå˜…å ±è¡¨ã€å¤§å‹ CSV æª”æ¡ˆï¼Œ
          åˆæˆ–è€… response payload é”åˆ°å¹¾ç™¾ MBã€‚å‘¢ç¨®æƒ…æ³ä¸‹ï¼Œç›´æ¥é€é API response å‚³è¼¸æ•¸æ“šæœƒå¥½æ…¢ï¼Œ
          è€Œä¸”å®¹æ˜“ timeoutã€‚
        </p>
        <p>
          å¸¸è¦‹å˜…åšæ³•ä¿‚ï¼šserver å°‡æ•¸æ“šç”Ÿæˆå¥½ä¹‹å¾Œä¸Šå‚³åˆ° S3ï¼ˆæˆ–è€…å…¶ä»– Object Storageï¼‰ï¼Œç„¶å¾Œåªå›å‚³ä¸€å€‹
          pre-signed download URL ç•€ clientã€‚å’æ¨£ API server å””ä½¿è‡ªå·±ç®¡ç†å¤§æª”æ¡ˆå˜…å‚³è¼¸ï¼Œ
          ç”± S3 å˜… CDN åŸºç¤è¨­æ–½å»è™•ç†ã€‚é‡é»ä¿‚å°‡ã€Œç”Ÿæˆæ•¸æ“šã€åŒã€Œå‚³è¼¸æ•¸æ“šã€å…©å€‹è²¬ä»»åˆ†é–‹ã€‚
        </p>

        <div class="diagram-container">
          <svg viewBox="0 0 700 380" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="s3-client-grad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#6366f1" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#1e293b"/>
              </linearGradient>
              <linearGradient id="s3-api-grad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#10B981" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#1e293b"/>
              </linearGradient>
              <linearGradient id="s3-db-grad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#f59e0b" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#1e293b"/>
              </linearGradient>
              <linearGradient id="s3-bucket-grad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#f87171" stop-opacity="0.35"/>
                <stop offset="100%" stop-color="#1e293b"/>
              </linearGradient>
              <filter id="s3-glow">
                <feGaussianBlur stdDeviation="4" result="blur"/>
                <feFlood flood-color="#f59e0b" flood-opacity="0.35" result="color"/>
                <feComposite in="color" in2="blur" operator="in" result="glow"/>
                <feMerge>
                  <feMergeNode in="glow"/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
              <filter id="s3-shadow">
                <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.4"/>
              </filter>
              <marker id="s3-arrow-blue" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
                <polygon points="0 0, 10 3.5, 0 7" fill="#6366f1"/>
              </marker>
              <marker id="s3-arrow-green" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
                <polygon points="0 0, 10 3.5, 0 7" fill="#34d399"/>
              </marker>
              <marker id="s3-arrow-amber" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
                <polygon points="0 0, 10 3.5, 0 7" fill="#fbbf24"/>
              </marker>
              <marker id="s3-arrow-red" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
                <polygon points="0 0, 10 3.5, 0 7" fill="#f87171"/>
              </marker>
            </defs>

            <!-- Client -->
            <rect x="30" y="40" width="130" height="56" rx="14" fill="url(#s3-client-grad)" stroke="#6366f1" stroke-width="1.5" filter="url(#s3-shadow)"/>
            <text x="95" y="65" text-anchor="middle" fill="#e0e0e0" font-size="13" font-weight="600">Client</text>
            <text x="95" y="82" text-anchor="middle" fill="#9ca3af" font-size="10">(Browser / App)</text>

            <!-- API Server -->
            <rect x="280" y="40" width="150" height="56" rx="14" fill="url(#s3-api-grad)" stroke="#10B981" stroke-width="1.5" filter="url(#s3-shadow)"/>
            <text x="355" y="65" text-anchor="middle" fill="#e0e0e0" font-size="13" font-weight="600">API Server</text>
            <text x="355" y="82" text-anchor="middle" fill="#9ca3af" font-size="10">(Generate data)</text>

            <!-- Database -->
            <rect x="530" y="40" width="130" height="56" rx="14" fill="url(#s3-db-grad)" stroke="#f59e0b" stroke-width="1.5" filter="url(#s3-shadow)"/>
            <text x="595" y="65" text-anchor="middle" fill="#e0e0e0" font-size="13" font-weight="600">Database</text>
            <text x="595" y="82" text-anchor="middle" fill="#9ca3af" font-size="10">(Source data)</text>

            <!-- S3 Bucket -->
            <rect x="280" y="180" width="150" height="62" rx="14" fill="url(#s3-bucket-grad)" stroke="#f87171" stroke-width="1.5" filter="url(#s3-glow)"/>
            <text x="355" y="205" text-anchor="middle" fill="#e0e0e0" font-size="13" font-weight="600">S3 Bucket</text>
            <text x="355" y="224" text-anchor="middle" fill="#9ca3af" font-size="10">(Object Storage)</text>

            <!-- Step 1: Client -> API -->
            <path d="M160,55 C210,55 230,55 278,55" stroke="#6366f1" stroke-width="1.8" fill="none" marker-end="url(#s3-arrow-blue)"/>
            <text x="219" y="47" text-anchor="middle" fill="#a5b4fc" font-size="10" font-weight="500">1. POST /export</text>

            <!-- Step 2: API -> Database -->
            <path d="M430,68 C470,68 500,68 528,68" stroke="#fbbf24" stroke-width="1.8" fill="none" marker-end="url(#s3-arrow-amber)"/>
            <text x="479" y="60" text-anchor="middle" fill="#fbbf24" font-size="10">2. Query data</text>

            <!-- Step 3: API -> S3 upload -->
            <path d="M355,96 C355,120 355,148 355,178" stroke="#f87171" stroke-width="1.8" fill="none" marker-end="url(#s3-arrow-red)"/>
            <text x="400" y="140" fill="#f87171" font-size="10" font-weight="500">3. Upload file</text>

            <!-- Step 4: API returns URL to Client -->
            <path d="M280,86 C220,110 180,100 162,86" stroke="#34d399" stroke-width="1.8" fill="none" marker-end="url(#s3-arrow-green)"/>
            <text x="200" y="116" text-anchor="middle" fill="#34d399" font-size="10">4. Return download URL</text>

            <!-- Step 5: Client downloads from S3 -->
            <path d="M95,96 C95,170 140,210 278,210" stroke="#6366f1" stroke-width="2" fill="none" marker-end="url(#s3-arrow-blue)" stroke-dasharray="6,3"/>
            <text x="150" y="195" fill="#a5b4fc" font-size="10" font-weight="500">5. Download from S3</text>

            <!-- Flow summary -->
            <rect x="70" y="275" width="560" height="85" rx="12" fill="#13151c" stroke="#2a2d3a" stroke-width="1"/>
            <text x="350" y="298" text-anchor="middle" fill="#ffffff" font-size="12" font-weight="600">Flow Summary</text>
            <text x="350" y="318" text-anchor="middle" fill="#a5b4fc" font-size="11" font-family="monospace">Client --request--> API --query--> DB</text>
            <text x="350" y="336" text-anchor="middle" fill="#f87171" font-size="11" font-family="monospace">API --upload--> S3 --url--> Client --download--> S3</text>
            <text x="350" y="352" text-anchor="middle" fill="#9ca3af" font-size="10">API server å””ä½¿è™•ç†å¤§æª”æ¡ˆå‚³è¼¸ï¼Œç”± S3 CDN è² è²¬</text>
          </svg>
        </div>

        <ol class="steps">
          <li>
            <span class="step-num">1</span>
            <span>Client ç™¼é€åŒ¯å‡ºè«‹æ±‚ï¼ˆä¾‹å¦‚ <code>POST /reports/export</code>ï¼‰</span>
          </li>
          <li>
            <span class="step-num">2</span>
            <span>API Server å¾ Database æŸ¥è©¢æ‰€éœ€æ•¸æ“šï¼Œç”Ÿæˆå®Œæ•´å˜…æª”æ¡ˆï¼ˆCSVã€Excelã€JSON ç­‰ï¼‰</span>
          </li>
          <li>
            <span class="step-num">3</span>
            <span>å°‡ç”Ÿæˆå¥½å˜…æª”æ¡ˆä¸Šå‚³åˆ° S3 Bucketï¼Œå–å¾—ä¸€å€‹ pre-signed URLï¼ˆå¸¶æœ‰éæœŸæ™‚é–“åŒå­˜å–æ¬Šé™ï¼‰</span>
          </li>
          <li>
            <span class="step-num">4</span>
            <span>API åªå›å‚³ download URL ç•€ Client â€” response payload æ¥µç´°ï¼Œé€šå¸¸åªæœ‰å¹¾ç™¾ bytes</span>
          </li>
          <li>
            <span class="step-num">5</span>
            <span>Client ç”¨å‘¢å€‹ URL ç›´æ¥å¾ S3 ä¸‹è¼‰æª”æ¡ˆï¼Œäº«å— S3 é«˜é€Ÿä¸‹è¼‰åŸºç¤è¨­æ–½å˜…å„ªå‹¢</span>
          </li>
        </ol>

        <div class="key-points">
          <div class="key-point">
            <h4>Pre-signed URL</h4>
            <p>å¸¶æœ‰ç°½åå˜…è‡¨æ™‚ä¸‹è¼‰é€£çµï¼Œè¨­å®šéæœŸæ™‚é–“ï¼ˆä¾‹å¦‚ 15 åˆ†é˜ï¼‰ï¼ŒéæœŸå¾Œå°±ç„¡æ³•å†å­˜å–ã€‚å®‰å…¨åˆæ–¹ä¾¿ã€‚</p>
          </div>
          <div class="key-point">
            <h4>ç•°æ­¥è™•ç†</h4>
            <p>å¦‚æœæ•¸æ“šç”Ÿæˆè€—æ™‚è¼ƒé•·ï¼Œå¯ä»¥å…ˆå›å‚³ 202 Acceptedï¼Œç„¶å¾Œç”¨ polling æˆ– webhook é€šçŸ¥ client ä¸‹è¼‰é€£çµã€‚</p>
          </div>
          <div class="key-point">
            <h4>æˆæœ¬æ•ˆç›Š</h4>
            <p>S3 å„²å­˜åŒå‚³è¼¸è²»ç”¨æ¥µä½ï¼Œè€Œä¸”è‡ªå¸¶ CDN èƒ½åŠ›ï¼Œå…¨çƒå„åœ°ä¸‹è¼‰é€Ÿåº¦éƒ½å¿«ï¼Œæ¯” API server ç›´å‚³åˆ’ç®—å¾—å¤šã€‚</p>
          </div>
          <div class="key-point">
            <h4>è²¬ä»»åˆ†é›¢</h4>
            <p>API server åªè² è²¬ã€Œç”Ÿæˆæ•¸æ“šã€ï¼ŒS3 è² è²¬ã€Œå„²å­˜åŒå‚³è¼¸ã€ã€‚å„å¸å…¶è·ï¼Œserver å””æœƒå› ç‚ºå¤§æª”æ¡ˆå‚³è¼¸è€Œ blockã€‚</p>
          </div>
        </div>

        <div class="use-case">
          <h4>éƒ¨ç½²å»ºè­°</h4>
          <p>
            å‘¢å€‹ pattern ç‰¹åˆ¥é©åˆåŒ¯å‡ºå ±è¡¨ã€å¤§å‹ CSV ä¸‹è¼‰ã€log æª”æ¡ˆåŒ¯å‡ºç­‰å ´æ™¯ã€‚
            å»ºè­°é…åˆ Task Queue ä½¿ç”¨ â€” client ç™¼è«‹æ±‚å¾Œç«‹å³æ”¶åˆ° job IDï¼Œserver å–ºèƒŒæ™¯è™•ç†å®Œå†é€šçŸ¥ã€‚
            S3 å˜… pre-signed URL è¨˜å¾—è¨­å®šåˆç†å˜…éæœŸæ™‚é–“ï¼Œé€šå¸¸ 15-60 åˆ†é˜å·²ç¶“è¶³å¤ ã€‚
            åŒæ™‚äº¦å»ºè­°è¨­å®š S3 lifecycle policyï¼Œè‡ªå‹•æ¸…ç†éæœŸå˜…åŒ¯å‡ºæª”æ¡ˆï¼Œé¿å…å„²å­˜æˆæœ¬ç„¡é™å¢é•·ã€‚
          </p>
        </div>
      </div>
    </div>

    <div class="tab-content" id="ai-viber">
      <div class="card">
        <h2>AI Viber</h2>
        <div class="subtitle">è¤‡è£½ Promptï¼Œè²¼å» AI å·¥å…·ï¼Œå³åˆ»é–‹å§‹ Build</div>

        <div class="prompt-card">
          <h4>Prompt 1 â€” å¯¦ç¾ Pagination + Streaming å¤§æ•¸æ“šå›æ‡‰</h4>
          <div class="prompt-text" id="prompt1">å¹«æ‰‹å¯¦ç¾ä¸€å€‹å®Œæ•´å˜… Large API Response è™•ç†æ–¹æ¡ˆï¼Œç”¨ <span class="placeholder">[Node.js / Python / Go / Java]</span> å»ºç«‹ã€‚

éœ€æ±‚å ´æ™¯ï¼šä¸€å€‹ API endpoint éœ€è¦å›å‚³ <span class="placeholder">[ç”¨æˆ¶åˆ—è¡¨ / è¨‚å–®ç´€éŒ„ / ç”¢å“ç›®éŒ„]</span>ï¼Œç¸½æ•¸æ“šé‡å¯èƒ½é”åˆ° <span class="placeholder">[10 è¬ / 100 è¬]</span> æ¢è¨˜éŒ„ã€‚

éœ€è¦å¯¦ç¾ä»¥ä¸‹åŠŸèƒ½ï¼š
1. Cursor-based Paginationï¼šç”¨ cursor å–ä»£ offsetï¼Œç¢ºä¿å¤§æ•¸æ“šé‡ä¸‹æ•ˆèƒ½ç©©å®š
2. Server-Sent Events (SSE) Streamingï¼šå°éœ€è¦å³æ™‚æ›´æ–°å˜…å ´æ™¯æä¾› streaming response
3. Response è‡ªå‹•å£“ç¸® Middlewareï¼ˆgzip + brotliï¼Œæ ¹æ“š Accept-Encoding è‡ªå‹•é¸æ“‡ï¼‰
4. åˆ†é  metadata æ¨™æº–æ ¼å¼ï¼ˆnextCursorã€hasMoreã€totalCountï¼‰
5. Rate Limiting é˜²æ­¢ client éåº¦è«‹æ±‚

æŠ€è¡“æ£§ï¼š<span class="placeholder">[æ¡†æ¶å]</span> + <span class="placeholder">[PostgreSQL / MySQL]</span> + Redisï¼ˆå¿«å–ç†±é–€æŸ¥è©¢ï¼‰

è«‹æä¾›å®Œæ•´å˜… API codeã€Database query å„ªåŒ–å»ºè­°ã€åŒ client ç«¯æ¶ˆè²»ç¯„ä¾‹ã€‚</div>
          <button class="copy-btn" onclick="copyPrompt('prompt1', this)">ğŸ“‹ è¤‡è£½</button>
        </div>

        <div class="prompt-card">
          <h4>Prompt 2 â€” è¨­è¨ˆ API Response å„ªåŒ–æ¶æ§‹</h4>
          <div class="prompt-text" id="prompt2">å¹«æ‰‹è¨­è¨ˆä¸€å€‹å®Œæ•´å˜… API Response å„ªåŒ–æ¶æ§‹ï¼Œé‡å° <span class="placeholder">[é›»å•†å¹³å° / SaaS æ‡‰ç”¨ / æ•¸æ“šåˆ†æå¹³å°]</span>ã€‚

ç¾æœ‰å•é¡Œï¼š
- éƒ¨åˆ† API endpoint å›æ‡‰æ™‚é–“è¶…é <span class="placeholder">[3 ç§’ / 5 ç§’ / 10 ç§’]</span>
- Response payload å¤§å°ç¶“å¸¸è¶…é <span class="placeholder">[5MB / 10MB / 50MB]</span>
- å¤§é‡ export è«‹æ±‚æœƒæ‹–æ…¢æ•´å€‹ API server

éœ€è¦è¨­è¨ˆå˜…æ–¹æ¡ˆï¼š
1. å¤šå±¤å¿«å–ç­–ç•¥ï¼šCDN Cache â†’ Redis Cache â†’ Application Cache
2. S3 Offloading Pipelineï¼šå¤§æª”æ¡ˆåŒ¯å‡º â†’ ä¸Šå‚³ S3 â†’ å›å‚³ pre-signed URL
3. ç•°æ­¥ Job Queueï¼šé•·æ™‚é–“å˜…æ•¸æ“šè™•ç†æ”¾å…¥ background jobï¼Œç”¨ webhook æˆ– polling é€šçŸ¥å®Œæˆ
4. GraphQL æˆ– Sparse Fieldsetsï¼šä»¤ client åªè«‹æ±‚éœ€è¦å˜… fieldï¼Œæ¸›å°‘ response size
5. ç›£æ§åŒ alertingï¼šè¿½è¹¤ response timeã€payload sizeã€error rate

è«‹æä¾›æ¶æ§‹åœ–æè¿°ã€æ¯å€‹çµ„ä»¶å˜…æŠ€è¡“é¸å‹å»ºè­°ã€åŒå¯¦æ–½å„ªå…ˆé †åºã€‚</div>
          <button class="copy-btn" onclick="copyPrompt('prompt2', this)">ğŸ“‹ è¤‡è£½</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const tabs = document.querySelectorAll('.tab-btn');
    const contents = document.querySelectorAll('.tab-content');
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        contents.forEach(c => c.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab)?.classList.add('active');
      });
    });

    function copyPrompt(id, btn) {
      const text = document.getElementById(id).innerText;
      navigator.clipboard.writeText(text).then(() => {
        btn.textContent = 'âœ… å·²è¤‡è£½';
        btn.classList.add('copied');
        setTimeout(() => { btn.textContent = 'ğŸ“‹ è¤‡è£½'; btn.classList.remove('copied'); }, 2000);
      });
    }
  </script>
</body>
</html>
