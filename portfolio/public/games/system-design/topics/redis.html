<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redis â€” ç³»çµ±æ¶æ§‹åœ–è§£</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang HK", "Microsoft JhengHei", sans-serif; background: #0f1117; color: #e0e0e0; min-height: 100vh; }
    .container { max-width: 960px; margin: 0 auto; padding: 40px 24px; }
    header { text-align: center; margin-bottom: 40px; }
    header h1 { font-size: 2rem; font-weight: 700; color: #ffffff; margin-bottom: 8px; }
    header p { font-size: 1rem; color: #9ca3af; line-height: 1.6; }
    .card { background: #1a1d27; border-radius: 16px; padding: 32px; margin-bottom: 24px; border: 1px solid #2a2d3a; }
    .card h2 { font-size: 1.5rem; color: #ffffff; margin-bottom: 8px; }
    .card .subtitle { font-size: 0.95rem; color: #6366f1; font-weight: 500; margin-bottom: 16px; }
    .card p { font-size: 0.95rem; color: #c0c4cc; line-height: 1.8; margin-bottom: 12px; }
    .diagram-container { background: #13151c; border-radius: 12px; padding: 24px; margin: 24px 0; overflow-x: auto; border: 1px solid #2a2d3a; }
    .diagram-container svg { display: block; margin: 0 auto; max-width: 100%; height: auto; }
    .steps { list-style: none; padding: 0; margin: 16px 0; }
    .steps li { display: flex; align-items: flex-start; gap: 12px; padding: 12px 0; border-bottom: 1px solid #2a2d3a; font-size: 0.95rem; color: #c0c4cc; line-height: 1.6; }
    .steps li:last-child { border-bottom: none; }
    .step-num { flex-shrink: 0; width: 28px; height: 28px; border-radius: 50%; background: #6366f1; color: #fff; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; }
    .key-points { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 16px; }
    @media (max-width: 600px) { .key-points { grid-template-columns: 1fr; } .container { padding: 24px 16px; } header h1 { font-size: 1.5rem; } .card { padding: 20px; } }
    .key-point { background: #13151c; border-radius: 10px; padding: 16px; border-left: 3px solid #6366f1; }
    .key-point h4 { color: #a5b4fc; font-size: 0.9rem; margin-bottom: 6px; }
    .key-point p { font-size: 0.85rem; color: #c0c4cc; margin-bottom: 0; line-height: 1.6; }
    .use-case { background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(99, 102, 241, 0.05)); border-left: 3px solid #6366f1; border-radius: 0 10px 10px 0; padding: 16px 20px; margin-top: 16px; }
    .use-case h4 { color: #a5b4fc; font-size: 0.9rem; margin-bottom: 6px; }
    .use-case p { font-size: 0.9rem; color: #c0c4cc; margin-bottom: 0; }
    .tabs { display: flex; gap: 4px; background: #1a1d27; border-radius: 12px; padding: 4px; margin-bottom: 24px; overflow-x: auto; }
    .tab-btn { flex: 1; padding: 12px 16px; border: none; background: transparent; color: #9ca3af; font-size: 0.9rem; font-weight: 500; border-radius: 8px; cursor: pointer; transition: all 0.25s ease; white-space: nowrap; font-family: inherit; }
    .tab-btn:hover { color: #e0e0e0; background: rgba(255, 255, 255, 0.05); }
    .tab-btn.active { background: #6366f1; color: #ffffff; font-weight: 600; }
    .tab-content { display: none; animation: fadeIn 0.3s ease; }
    .tab-content.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
    .highlight-box { background: rgba(245,158,11,0.1); border-left: 3px solid #F59E0B; border-radius: 0 10px 10px 0; padding: 16px 20px; margin: 16px 0; }
    .highlight-box p { color: #fbbf24; font-size: 0.95rem; line-height: 1.8; margin: 0; font-weight: 500; }
    /* AI Viber */
    .prompt-card { background: #13151c; border-radius: 12px; padding: 20px; margin-bottom: 16px; border: 1px solid #2a2d3a; }
    .prompt-card h4 { color: #a5b4fc; font-size: 0.95rem; margin-bottom: 12px; }
    .prompt-text { background: #0a0b10; border-radius: 8px; padding: 16px; font-size: 0.85rem; color: #c0c4cc; line-height: 1.8; white-space: pre-wrap; word-break: break-word; border: 1px solid #2a2d3a; position: relative; }
    .prompt-text .placeholder { color: #fbbf24; font-weight: 600; }
    .copy-btn { margin-top: 10px; padding: 8px 16px; background: #6366f1; color: #fff; border: none; border-radius: 8px; font-size: 0.8rem; cursor: pointer; font-family: inherit; transition: all 0.2s ease; }
    .copy-btn:hover { background: #4f46e5; }
    .copy-btn.copied { background: #10B981; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Redis</h1>
      <p>In-Memory Key-Value Store â€” å¾®ç§’ç´šå˜…å»¶é²é»æ¨£åšåˆ°</p>
    </header>

    <div class="tabs">
      <button class="tab-btn active" data-tab="what">â‘  Redis ä¿‚å’©</button>
      <button class="tab-btn" data-tab="tradeoffs">â‘¡ Trade-offs</button>
      <button class="tab-btn" data-tab="realworld">â‘¢ å¯¦æˆ°æ‡‰ç”¨</button>
      <button class="tab-btn" data-tab="ai-viber">â‘£ AI Viber</button>
    </div>

    <div class="tab-content active" id="what">
      <div class="card">
        <h2>Redis ä¿‚å’©ï¼Ÿ</h2>
        <div class="subtitle">In-Memory Key-Value Database</div>
        <p>
          å‘¢åº¦æœ‰ä¸€å€‹å¥½é‡è¦å˜…æ¦‚å¿µã€‚å‚³çµ±å˜…è³‡æ–™åº«ï¼ˆå¥½ä¼¼ Postgresã€MySQLï¼‰å°‡è³‡æ–™å­˜å–ºç¡¬ç¢Ÿåº¦ï¼Œæ‰€ä»¥æ¯æ¬¡æŸ¥è©¢éƒ½è¦ç¶“éç£ç¢Ÿ I/Oã€‚è€Œ <strong style="color:#34d399">Redis å°‡è³‡æ–™å­˜å–º RAMï¼ˆè¨˜æ†¶é«”ï¼‰å…¥é¢</strong>ï¼Œå®Œå…¨è·³éå’—ç£ç¢Ÿå‘¢ä¸€å±¤ã€‚çµæœä¿‚ï¼š<strong style="color:#6366f1">å¾®ç§’ç´šï¼ˆmicrosecondï¼‰å˜…å»¶é²</strong>ã€‚
        </p>
        <p>
          å‘¢å€‹ä¿‚ä¸€å€‹ Key-Value Storeï¼Œå³ä¿‚ç”¨ä¸€å€‹ key å»æ”å°æ‡‰å˜… valueã€‚å¥½ä¼¼ä¸€å€‹è¶…å¿«å˜…å­—å…¸å’ã€‚Redis æ”¯æ´å””åŒå˜…è³‡æ–™çµæ§‹ï¼šStringã€Listã€Setã€Hashã€Sorted Set ç­‰ç­‰ã€‚æ‰€ä»¥ä½¢å””æ­¢ä¿‚ç°¡å–®å˜… key-valueï¼Œä»²å¯ä»¥åšå¥½å¤šè¤‡é›œå˜…æ“ä½œã€‚
        </p>

        <div class="diagram-container">
          <svg viewBox="0 0 680 360" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <filter id="shadow" x="-4%" y="-4%" width="108%" height="108%"><feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.4"/></filter>
              <filter id="glowGreen">
                <feGaussianBlur stdDeviation="5" result="blur"/>
                <feFlood flood-color="#34d399" flood-opacity="0.25"/>
                <feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
              </filter>
              <filter id="glowPurple">
                <feGaussianBlur stdDeviation="5" result="blur"/>
                <feFlood flood-color="#8B5CF6" flood-opacity="0.25"/>
                <feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
              </filter>
              <linearGradient id="gradRedis" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#1e293b"/>
                <stop offset="100%" stop-color="#2a1e1e"/>
              </linearGradient>
              <linearGradient id="gradDisk" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#1e293b"/>
                <stop offset="100%" stop-color="#251e35"/>
              </linearGradient>
              <linearGradient id="gradApp" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#1e293b"/>
                <stop offset="100%" stop-color="#1e2940"/>
              </linearGradient>
              <marker id="arrGreen" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto"><path d="M0,0 L8,4 L0,8 Z" fill="#34d399"/></marker>
              <marker id="arrPurple" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto"><path d="M0,0 L8,4 L0,8 Z" fill="#8B5CF6"/></marker>
              <marker id="arrAmber" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto"><path d="M0,0 L8,4 L0,8 Z" fill="#fbbf24"/></marker>
            </defs>

            <!-- App -->
            <g transform="translate(40,150)" filter="url(#glowGreen)">
              <rect width="120" height="70" rx="14" fill="url(#gradApp)" stroke="#3B82F6" stroke-width="2" filter="url(#shadow)"/>
              <text x="60" y="30" text-anchor="middle" fill="#3B82F6" font-size="13" font-weight="700">App</text>
              <text x="60" y="50" text-anchor="middle" fill="#9ca3af" font-size="10">æ‡‰ç”¨ç¨‹å¼</text>
            </g>

            <!-- Redis (RAM) -->
            <g transform="translate(270,60)">
              <rect width="160" height="90" rx="14" fill="url(#gradRedis)" stroke="#EF4444" stroke-width="2" filter="url(#shadow)"/>
              <text x="80" y="25" text-anchor="middle" fill="#EF4444" font-size="13" font-weight="700">Redis (RAM)</text>
              <text x="80" y="45" text-anchor="middle" fill="#9ca3af" font-size="10">Key-Value Store</text>
              <text x="80" y="65" text-anchor="middle" fill="#34d399" font-size="11" font-weight="700">Microsecond</text>
              <text x="80" y="80" text-anchor="middle" fill="#34d399" font-size="11" font-weight="700">Latency</text>
            </g>

            <!-- PostgreSQL (Disk) -->
            <g transform="translate(270,210)">
              <rect width="160" height="90" rx="14" fill="url(#gradDisk)" stroke="#8B5CF6" stroke-width="2" filter="url(#shadow)"/>
              <text x="80" y="25" text-anchor="middle" fill="#8B5CF6" font-size="13" font-weight="700">Postgres (Disk)</text>
              <text x="80" y="45" text-anchor="middle" fill="#9ca3af" font-size="10">å‚³çµ±è³‡æ–™åº«</text>
              <text x="80" y="65" text-anchor="middle" fill="#f87171" font-size="11" font-weight="700">Millisecond</text>
              <text x="80" y="80" text-anchor="middle" fill="#f87171" font-size="11" font-weight="700">Latency</text>
            </g>

            <!-- Arrows -->
            <path d="M 162 175 Q 210 110 268 100" fill="none" stroke="#34d399" stroke-width="2" marker-end="url(#arrGreen)"/>
            <text x="200" y="135" fill="#34d399" font-size="11" font-weight="600">è¶…å¿«æŸ¥è©¢</text>

            <path d="M 162 195 Q 210 235 268 250" fill="none" stroke="#8B5CF6" stroke-width="2" marker-end="url(#arrPurple)"/>
            <text x="200" y="225" fill="#8B5CF6" font-size="11" font-weight="600">æ…¢å•²</text>

            <!-- Speed comparison -->
            <g transform="translate(480,60)">
              <rect width="160" height="240" rx="14" fill="rgba(245,158,11,0.08)" stroke="#F59E0B" stroke-width="1.5"/>
              <text x="80" y="25" text-anchor="middle" fill="#fbbf24" font-size="12" font-weight="700">é€Ÿåº¦å°æ¯”</text>

              <text x="20" y="55" fill="#34d399" font-size="11" font-weight="700">Redis (RAM):</text>
              <text x="20" y="75" fill="#9ca3af" font-size="10">â€¢ å¾®ç§’ç´š (Î¼s)</text>
              <text x="20" y="92" fill="#9ca3af" font-size="10">â€¢ 1-100 Î¼s</text>
              <text x="20" y="109" fill="#9ca3af" font-size="10">â€¢ æ¥µå¿«è®€å¯«</text>

              <line x1="20" y1="125" x2="140" y2="125" stroke="#2a2d3a" stroke-width="1"/>

              <text x="20" y="150" fill="#f87171" font-size="11" font-weight="700">Postgres (Disk):</text>
              <text x="20" y="170" fill="#9ca3af" font-size="10">â€¢ æ¯«ç§’ç´š (ms)</text>
              <text x="20" y="187" fill="#9ca3af" font-size="10">â€¢ 1-100 ms</text>
              <text x="20" y="204" fill="#9ca3af" font-size="10">â€¢ æ…¢ 1000 å€</text>

              <text x="80" y="230" text-anchor="middle" fill="#fbbf24" font-size="10" font-weight="600">å·®è·ï¼š1000x</text>
            </g>
          </svg>
        </div>

        <h3 style="color:#fff; font-size:1.1rem; margin-bottom:12px;">é»è§£å’å¿«ï¼Ÿ</h3>
        <div class="key-points">
          <div class="key-point">
            <h4>RAM vs Disk</h4>
            <p>RAM å­˜å–é€Ÿåº¦æ¯” Disk å¿«æˆåƒå€ã€‚å‚³çµ±è³‡æ–™åº«éœ€è¦è®€å¯«ç¡¬ç¢Ÿï¼ŒRedis å…¨éƒ¨æ“ä½œéƒ½å–ºè¨˜æ†¶é«”å®Œæˆï¼Œæ‰€ä»¥å¯ä»¥åšåˆ°å¾®ç§’ç´šå˜…å»¶é²ã€‚</p>
          </div>
          <div class="key-point">
            <h4>ç°¡å–®å˜…è³‡æ–™çµæ§‹</h4>
            <p>Key-Value ä¿‚æœ€ç°¡å–®å˜…è³‡æ–™çµæ§‹ï¼Œå””éœ€è¦è¤‡é›œå˜…æŸ¥è©¢è¨ˆåŠƒæˆ–è€… JOIN æ“ä½œã€‚ç›´æ¥ç”¨ key æ” valueï¼ŒO(1) æ™‚é–“è¤‡é›œåº¦ã€‚</p>
          </div>
          <div class="key-point">
            <h4>Single-threaded</h4>
            <p>Redis ç”¨å–®ç·šç¨‹è™•ç†æ‰€æœ‰è«‹æ±‚ï¼Œé¿å…å’—å¤šç·šç¨‹å˜… lock åŒ context switch overheadã€‚åè€Œå› ç‚ºä¿‚ in-memoryï¼Œå–®ç·šç¨‹éƒ½å¤ å¿«ã€‚</p>
          </div>
          <div class="key-point">
            <h4>è±å¯Œå˜…è³‡æ–™é¡å‹</h4>
            <p>é›–ç„¶ä¿‚ Key-Value Storeï¼Œä½†æ”¯æ´ Listã€Setã€Hashã€Sorted Set ç­‰ç­‰ã€‚å¯ä»¥åš Leaderboardã€Session Storeã€Message Queue ç­‰ç­‰ç”¨é€”ã€‚</p>
          </div>
        </div>

        <div class="highlight-box">
          <p>é—œéµé‡é»ï¼šRedis çŠ§ç‰²å’—å„²å­˜ç©ºé–“åŒæŒä¹…æ€§ï¼Œæ›å–å’—æ¥µè‡´å˜…é€Ÿåº¦ã€‚å‘¢å€‹å°±ä¿‚å…¸å‹å˜… trade-offã€‚</p>
        </div>
      </div>
    </div>

    <div class="tab-content" id="tradeoffs">
      <div class="card">
        <h2>Trade-offs</h2>
        <div class="subtitle">å†‡å˜¢ä¿‚å®Œç¾å˜… â€” RAM å˜…ä»£åƒ¹</div>
        <p>
          è€Œå®¶è¬›ä¸‹ Redis å˜…ç¼ºé»ã€‚å› ç‚º Redis å°‡æ‰€æœ‰å˜¢æ”¾å–º RAM å…¥é¢ï¼Œå‘¢å€‹æ±ºå®šå¸¶åšŸå…©å€‹æ ¸å¿ƒå•é¡Œï¼š<strong style="color:#f87171">RAM å¥½è²´è€Œä¸”å¥½æœ‰é™</strong>ï¼ŒåŒåŸ‹ <strong style="color:#f87171">è³‡æ–™å–º crash å˜…æ™‚å€™æœƒéºå¤±</strong>ã€‚ä»¥ä¸‹é€å€‹æ‹†è§£ã€‚
        </p>

        <div class="diagram-container">
          <svg viewBox="0 0 680 400" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <filter id="shadow2" x="-4%" y="-4%" width="108%" height="108%"><feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.4"/></filter>
              <linearGradient id="gradCost" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#1e293b"/>
                <stop offset="100%" stop-color="#2a1e1e"/>
              </linearGradient>
            </defs>

            <!-- Cost Comparison -->
            <g transform="translate(40,40)">
              <rect width="280" height="140" rx="14" fill="url(#gradCost)" stroke="#f87171" stroke-width="2" filter="url(#shadow2)"/>
              <text x="140" y="25" text-anchor="middle" fill="#f87171" font-size="13" font-weight="700">å„²å­˜æˆæœ¬</text>

              <text x="20" y="55" fill="#fbbf24" font-size="11" font-weight="700">RAM (Redis):</text>
              <text x="20" y="75" fill="#9ca3af" font-size="10">â€¢ æ¯ GB ç´„ $10-20</text>
              <text x="20" y="92" fill="#9ca3af" font-size="10">â€¢ å®¹é‡æœ‰é™ (å¹¾å GB)</text>

              <line x1="20" y1="105" x2="260" y2="105" stroke="#2a2d3a" stroke-width="1"/>

              <text x="20" y="125" fill="#34d399" font-size="11" font-weight="700">Disk (SSD):</text>
              <text x="160" y="125" fill="#9ca3af" font-size="10">æ¯ GB ç´„ $0.10</text>
            </g>

            <!-- Durability Problem -->
            <g transform="translate(360,40)">
              <rect width="280" height="140" rx="14" fill="url(#gradCost)" stroke="#f87171" stroke-width="2" filter="url(#shadow2)"/>
              <text x="140" y="25" text-anchor="middle" fill="#f87171" font-size="13" font-weight="700">æŒä¹…æ€§å•é¡Œ</text>

              <text x="20" y="55" fill="#fbbf24" font-size="11" font-weight="700">Server Crash:</text>
              <text x="20" y="75" fill="#9ca3af" font-size="10">â€¢ RAM è³‡æ–™å…¨éƒ¨éºå¤±</text>
              <text x="20" y="92" fill="#9ca3af" font-size="10">â€¢ é‡å•Ÿå¾Œ Redis ç©ºç™½</text>

              <line x1="20" y1="105" x2="260" y2="105" stroke="#2a2d3a" stroke-width="1"/>

              <text x="20" y="125" fill="#34d399" font-size="11" font-weight="700">è§£æ±ºæ–¹æ¡ˆå­˜åœ¨ä½†å””å®Œç¾</text>
            </g>

            <!-- Backup Methods -->
            <g transform="translate(40,220)">
              <rect width="600" height="160" rx="14" fill="rgba(99,102,241,0.08)" stroke="#6366f1" stroke-width="1.5"/>
              <text x="300" y="25" text-anchor="middle" fill="#6366f1" font-size="13" font-weight="700">å‚™ä»½æ–¹æ³•</text>

              <g transform="translate(20,45)">
                <rect width="260" height="95" rx="10" fill="#13151c" stroke="#2a2d3a" stroke-width="1"/>
                <text x="130" y="22" text-anchor="middle" fill="#a5b4fc" font-size="11" font-weight="700">RDB (Snapshot)</text>
                <text x="15" y="42" fill="#9ca3af" font-size="10">â€¢ å®šæ™‚å°‡æ•´å€‹è³‡æ–™é›†å¯«å…¥ disk</text>
                <text x="15" y="59" fill="#9ca3af" font-size="10">â€¢ å¿«é€Ÿæ¢å¾©</text>
                <text x="15" y="76" fill="#f87171" font-size="10">â€¢ ä½†æœƒéºå¤±æœ€å¾Œä¸€æ¬¡ snapshot</text>
                <text x="15" y="90" fill="#f87171" font-size="10">  å¾Œå˜…æ‰€æœ‰å¯«å…¥</text>
              </g>

              <g transform="translate(310,45)">
                <rect width="270" height="95" rx="10" fill="#13151c" stroke="#2a2d3a" stroke-width="1"/>
                <text x="135" y="22" text-anchor="middle" fill="#a5b4fc" font-size="11" font-weight="700">AOF (Append-Only File)</text>
                <text x="15" y="42" fill="#9ca3af" font-size="10">â€¢ æ¯å€‹å¯«å…¥æ“ä½œéƒ½è¨˜éŒ„åˆ° log</text>
                <text x="15" y="59" fill="#9ca3af" font-size="10">â€¢ æ›´å¥½å˜…æŒä¹…æ€§</text>
                <text x="15" y="76" fill="#f87171" font-size="10">â€¢ ä½†æœƒå½±éŸ¿å¯«å…¥æ•ˆèƒ½</text>
                <text x="15" y="90" fill="#f87171" font-size="10">â€¢ é‡å•Ÿæ¢å¾©æ™‚é–“è¼ƒé•·</text>
              </g>
            </g>
          </svg>
        </div>

        <h3 style="color:#fff; font-size:1.1rem; margin-bottom:12px;">æ ¸å¿ƒ Trade-offs</h3>
        <ol class="steps">
          <li><span class="step-num">1</span><span><strong>æˆæœ¬é«˜æ˜‚ï¼š</strong>RAM æ¯” SSD è²´æˆ 100 å€ã€‚å¦‚æœè¦å„² 1TB å˜…è³‡æ–™ï¼Œç”¨ Disk å¯èƒ½åªä¿‚ $100ï¼Œä½†ç”¨ RAM å°±è¦æˆè¬èšŠã€‚æ‰€ä»¥ Redis é€šå¸¸åªæœƒç”¨åšŸå­˜æœ€ç†±é–€å˜…è³‡æ–™ã€‚</span></li>
          <li><span class="step-num">2</span><span><strong>å®¹é‡æœ‰é™ï¼š</strong>ä¸€å° Server å˜… RAM é€šå¸¸åªæœ‰å¹¾å GBï¼Œå””ä¼¼ Disk å¯ä»¥å»åˆ°å¹¾ TBã€‚æ‰€ä»¥ Redis å””é©åˆåšä¸»è³‡æ–™åº«ï¼Œé€šå¸¸ä¿‚åš Cache æˆ–è€… Session Storeã€‚</span></li>
          <li><span class="step-num">3</span><span><strong>è³‡æ–™æœƒéºå¤±ï¼š</strong>Server crash æˆ–è€…é‡å•Ÿå˜…æ™‚å€™ï¼ŒRAM å…¥é¢å˜…å˜¢æœƒå…¨éƒ¨æ¸…ç©ºã€‚é›–ç„¶æœ‰ RDB åŒ AOF å…©ç¨®å‚™ä»½æ–¹æ³•ï¼Œä½†éƒ½æœƒéºå¤±æœ€è¿‘å˜…å¯«å…¥ã€‚å‘¢å€‹ä¿‚ç„¡å¯é¿å…å˜…ã€‚</span></li>
          <li><span class="step-num">4</span><span><strong>å””é©åˆåšå”¯ä¸€è³‡æ–™ä¾†æºï¼š</strong>å› ç‚ºä»¥ä¸Šå˜…å•é¡Œï¼Œé€šå¸¸æœƒå°‡ Redis åŒå‚³çµ±è³‡æ–™åº«ï¼ˆå¥½ä¼¼ Postgresï¼‰ä¸€é½Šç”¨ã€‚Redis åšå¿«å–ï¼ŒPostgres åšæŒä¹…åŒ–ã€‚å‘¢å€‹å°±ä¿‚æœ€å¸¸è¦‹å˜…çµ„åˆç­–ç•¥ã€‚</span></li>
        </ol>

        <div class="highlight-box">
          <p>çµè«–ï¼šRedis å””ä¿‚ç”¨åšŸå–ä»£å‚³çµ±è³‡æ–™åº«ï¼Œè€Œä¿‚è£œå……ä½¢ã€‚ç”¨ Redis å˜…é€Ÿåº¦è™•ç†ç†±é–€è³‡æ–™ï¼Œç”¨ Postgres å˜…æŒä¹…æ€§ä¿è­·é‡è¦è³‡æ–™ã€‚</p>
        </div>
      </div>
    </div>

    <div class="tab-content" id="realworld">
      <div class="card">
        <h2>å¯¦æˆ°æ‡‰ç”¨</h2>
        <div class="subtitle">éŠæˆ²æ’è¡Œæ¦œï¼šRedis + Postgres çµ„åˆç­–ç•¥</div>
        <p>
          ä»¥ä¸‹ç”¨ä¸€å€‹çœŸå¯¦å ´æ™¯èªªæ˜ï¼šå³æ™‚æ’è¡Œæ¦œç³»çµ±ã€‚å‡è¨­ä¿‚åšç·Šä¸€å€‹éŠæˆ²ï¼Œéœ€è¦é¡¯ç¤ºå…¨çƒç©å®¶å˜…å³æ™‚æ’åã€‚å‘¢å€‹å ´æ™¯éœ€è¦ï¼š<strong style="color:#34d399">è¶…ä½å»¶é²</strong>ï¼ˆç©å®¶æ‰“å®Œä¸€å±€å³åˆ»æ›´æ–°ï¼‰åŒ <strong style="color:#34d399">é«˜ä½µç™¼</strong>ï¼ˆæˆåƒä¸Šè¬ç©å®¶åŒæ™‚ç©ï¼‰ã€‚å‘¢å€‹å°±ä¿‚ Redis å˜…å®Œç¾ç”¨é€”ã€‚
        </p>

        <div class="diagram-container">
          <svg viewBox="0 0 700 440" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <filter id="shadow3" x="-4%" y="-4%" width="108%" height="108%"><feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.4"/></filter>
              <linearGradient id="gradFE" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#1e293b"/>
                <stop offset="100%" stop-color="#1e2940"/>
              </linearGradient>
              <linearGradient id="gradBE" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#1e293b"/>
                <stop offset="100%" stop-color="#2a1e2a"/>
              </linearGradient>
              <linearGradient id="gradRedis2" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#1e293b"/>
                <stop offset="100%" stop-color="#2a1e1e"/>
              </linearGradient>
              <linearGradient id="gradPG" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#1e293b"/>
                <stop offset="100%" stop-color="#251e35"/>
              </linearGradient>
              <marker id="arrBlue2" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto"><path d="M0,0 L8,4 L0,8 Z" fill="#6366f1"/></marker>
              <marker id="arrGreen2" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto"><path d="M0,0 L8,4 L0,8 Z" fill="#34d399"/></marker>
              <marker id="arrAmber2" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto"><path d="M0,0 L8,4 L0,8 Z" fill="#fbbf24"/></marker>
            </defs>

            <!-- React Frontend -->
            <g transform="translate(40,180)">
              <rect width="120" height="70" rx="14" fill="url(#gradFE)" stroke="#3B82F6" stroke-width="2" filter="url(#shadow3)"/>
              <text x="60" y="30" text-anchor="middle" fill="#3B82F6" font-size="13" font-weight="700">React</text>
              <text x="60" y="50" text-anchor="middle" fill="#9ca3af" font-size="10">å‰ç«¯</text>
            </g>

            <!-- Backend -->
            <g transform="translate(270,180)">
              <rect width="120" height="70" rx="14" fill="url(#gradBE)" stroke="#a5b4fc" stroke-width="2" filter="url(#shadow3)"/>
              <text x="60" y="30" text-anchor="middle" fill="#a5b4fc" font-size="13" font-weight="700">Backend</text>
              <text x="60" y="50" text-anchor="middle" fill="#9ca3af" font-size="10">Node.js / Go</text>
            </g>

            <!-- Redis -->
            <g transform="translate(500,80)">
              <rect width="160" height="90" rx="14" fill="url(#gradRedis2)" stroke="#EF4444" stroke-width="2" filter="url(#shadow3)"/>
              <text x="80" y="25" text-anchor="middle" fill="#EF4444" font-size="13" font-weight="700">Redis</text>
              <text x="80" y="45" text-anchor="middle" fill="#9ca3af" font-size="10">Sorted Set</text>
              <text x="80" y="62" text-anchor="middle" fill="#34d399" font-size="10" font-weight="600">å³æ™‚æ’è¡Œæ¦œ</text>
              <text x="80" y="77" text-anchor="middle" fill="#34d399" font-size="10" font-weight="600">Leaderboard</text>
            </g>

            <!-- Postgres -->
            <g transform="translate(500,230)">
              <rect width="160" height="90" rx="14" fill="url(#gradPG)" stroke="#8B5CF6" stroke-width="2" filter="url(#shadow3)"/>
              <text x="80" y="25" text-anchor="middle" fill="#8B5CF6" font-size="13" font-weight="700">Postgres</text>
              <text x="80" y="45" text-anchor="middle" fill="#9ca3af" font-size="10">æŒä¹…åŒ–è³‡æ–™</text>
              <text x="80" y="62" text-anchor="middle" fill="#a5b4fc" font-size="10" font-weight="600">ç”¨æˆ¶è³‡æ–™</text>
              <text x="80" y="77" text-anchor="middle" fill="#a5b4fc" font-size="10" font-weight="600">æ­·å²è¨˜éŒ„</text>
            </g>

            <!-- WebSocket Connection -->
            <path d="M 162 210 Q 210 205 268 210" fill="none" stroke="#6366f1" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrBlue2)"/>
            <text x="215" y="195" text-anchor="middle" fill="#6366f1" font-size="10" font-weight="600">WebSocket</text>
            <text x="215" y="208" text-anchor="middle" fill="#6366f1" font-size="9">å³æ™‚é€£æ¥</text>

            <!-- Backend to Redis -->
            <path d="M 392 200 Q 440 150 498 125" fill="none" stroke="#34d399" stroke-width="2" marker-end="url(#arrGreen2)"/>
            <text x="445" y="155" text-anchor="middle" fill="#34d399" font-size="10" font-weight="600">è®€/å¯«æ’å</text>
            <text x="445" y="168" text-anchor="middle" fill="#34d399" font-size="9">å¾®ç§’ç´š</text>

            <!-- Backend to Postgres -->
            <path d="M 392 220 Q 440 250 498 270" fill="none" stroke="#8B5CF6" stroke-width="2" marker-end="url(#arrAmber2)"/>
            <text x="445" y="260" text-anchor="middle" fill="#8B5CF6" font-size="10" font-weight="600">å„²å­˜ç”¨æˆ¶</text>

            <!-- Flow annotations -->
            <g transform="translate(40,30)">
              <rect width="620" height="35" rx="10" fill="rgba(245,158,11,0.1)" stroke="#F59E0B" stroke-width="1.5"/>
              <text x="310" y="23" text-anchor="middle" fill="#fbbf24" font-size="11" font-weight="700">å³æ™‚æ’è¡Œæ¦œæµç¨‹ï¼šç©å®¶å®ŒæˆéŠæˆ² â†’ Backend æ›´æ–° Redis Sorted Set â†’ WebSocket æ¨é€æœ€æ–°æ’å</text>
            </g>

            <!-- Data Flow Steps -->
            <g transform="translate(40,340)">
              <rect width="300" height="85" rx="10" fill="#13151c" stroke="#34d399" stroke-width="1.5"/>
              <text x="150" y="20" text-anchor="middle" fill="#34d399" font-size="11" font-weight="700">Redis æ“ä½œ</text>
              <text x="15" y="40" fill="#9ca3af" font-size="10">1. ZADD leaderboard 1500 user:123</text>
              <text x="15" y="57" fill="#9ca3af" font-size="10">2. ZREVRANGE leaderboard 0 99</text>
              <text x="15" y="74" fill="#9ca3af" font-size="10">3. ZRANK leaderboard user:123</text>
            </g>

            <g transform="translate(360,340)">
              <rect width="300" height="85" rx="10" fill="#13151c" stroke="#8B5CF6" stroke-width="1.5"/>
              <text x="150" y="20" text-anchor="middle" fill="#8B5CF6" font-size="11" font-weight="700">Postgres æ“ä½œ</text>
              <text x="15" y="40" fill="#9ca3af" font-size="10">1. å„²å­˜ç”¨æˆ¶å®Œæ•´è³‡æ–™</text>
              <text x="15" y="57" fill="#9ca3af" font-size="10">2. è¨˜éŒ„éŠæˆ²æ­·å²</text>
              <text x="15" y="74" fill="#9ca3af" font-size="10">3. åˆ†æçµ±è¨ˆå ±å‘Š</text>
            </g>
          </svg>
        </div>

        <h3 style="color:#fff; font-size:1.1rem; margin-bottom:12px;">ç³»çµ±æ¶æ§‹è©³è§£</h3>
        <ol class="steps">
          <li><span class="step-num">1</span><span><strong>React å‰ç«¯ï¼š</strong>é¡¯ç¤ºå³æ™‚æ’è¡Œæ¦œï¼Œé€šé WebSocket é€£æ¥åˆ° Backendã€‚æ¯ç•¶æœ‰ç©å®¶åˆ†æ•¸æ›´æ–°ï¼Œå³åˆ»æ”¶åˆ°æ¨é€ï¼Œå””éœ€è¦ä¸åœ pollingã€‚å‘¢å€‹ä¿‚å³æ™‚ç³»çµ±å˜…æ¨™æº–åšæ³•ã€‚</span></li>
          <li><span class="step-num">2</span><span><strong>Backend Serverï¼š</strong>è™•ç†éŠæˆ²é‚è¼¯ï¼Œç©å®¶æ‰“å®Œä¸€å±€ä¹‹å¾Œï¼Œç”¨ ZADD æŒ‡ä»¤æ›´æ–° Redis Sorted Setã€‚ç„¶å¾Œé€šé WebSocket æ¨é€æœ€æ–°æ’åä¿¾æ‰€æœ‰åœ¨ç·šç©å®¶ã€‚å¾®ç§’ç´šå˜…æ›´æ–°é€Ÿåº¦ã€‚</span></li>
          <li><span class="step-num">3</span><span><strong>Redis Sorted Setï¼š</strong>å‘¢å€‹ä¿‚ Redis æœ€å¼·å˜…è³‡æ–™çµæ§‹ä¹‹ä¸€ã€‚æ¯å€‹ç©å®¶ä¿‚ä¸€å€‹ memberï¼Œåˆ†æ•¸ä¿‚ scoreã€‚è‡ªå‹•æŒ‰åˆ†æ•¸æ’åºï¼ŒæŸ¥è©¢ Top 100 åªä¿‚ O(log N)ã€‚ZREVRANGE æ”æ’åï¼ŒZRANK æŸ¥å€‹äººä½ç½®ï¼Œå…¨éƒ¨éƒ½ä¿‚è¶…å¿«æ“ä½œã€‚</span></li>
          <li><span class="step-num">4</span><span><strong>Postgres æŒä¹…åŒ–ï¼š</strong>åŒæ™‚å°‡ç”¨æˆ¶è³‡æ–™ã€éŠæˆ²æ­·å²å¯«å…¥ Postgresã€‚å¦‚æœ Redis crashï¼Œå¯ä»¥å¾ Postgres é‡å»ºæ’è¡Œæ¦œã€‚Postgres è² è²¬é•·æœŸå„²å­˜ï¼ŒRedis è² è²¬å³æ™‚æŸ¥è©¢ã€‚å®Œç¾åˆ†å·¥ã€‚</span></li>
        </ol>

        <div class="use-case">
          <h4>WebSocket å³æ™‚æ¨é€</h4>
          <p>ç•¶æ’è¡Œæ¦œæ›´æ–°ï¼ŒBackend é€šé WebSocket æ¨é€æ–°æ’åä¿¾æ‰€æœ‰åœ¨ç·šç©å®¶ã€‚å‘¢å€‹æ¯”å‚³çµ±å˜… HTTP polling å¿«å¥½å¤šï¼Œè€Œä¸”æ¸›å°‘å’—å¤§é‡ç„¡è¬‚å˜…è«‹æ±‚ã€‚é…åˆ Redis å˜…å¾®ç§’ç´šæŸ¥è©¢ï¼Œç©å®¶å¯ä»¥è¦‹åˆ°çœŸæ­£å˜…å³æ™‚æ›´æ–°ã€‚</p>
        </div>

        <div class="use-case">
          <h4>çµ„åˆç­–ç•¥å˜…æ ¸å¿ƒåŸå‰‡</h4>
          <p>Redis åšç†±æ•¸æ“šå¿«å–ï¼ˆæ’è¡Œæ¦œã€Sessionï¼‰ï¼ŒPostgres åšå†·æ•¸æ“šæŒä¹…åŒ–ï¼ˆç”¨æˆ¶è³‡æ–™ã€æ­·å²è¨˜éŒ„ï¼‰ã€‚å‘¢å€‹ä¿‚æœ€ç¶“å…¸å˜…çµ„åˆã€‚Redis æä¾›é€Ÿåº¦ï¼ŒPostgres æä¾›å¯é æ€§ã€‚å…©å€‹ä¸€é½Šç”¨ï¼Œå…ˆä¿‚å®Œæ•´å˜…æ–¹æ¡ˆã€‚</p>
        </div>

        <div class="highlight-box">
          <p>è¨˜ä½ï¼šRedis å””ä¿‚è¬èƒ½ï¼Œä½†å–ºéœ€è¦æ¥µä½å»¶é²å˜…å ´æ™¯ï¼ˆæ’è¡Œæ¦œã€Sessionã€Cacheã€Real-time Analyticsï¼‰ï¼Œä½¢ä¿‚ç„¡å¯å–ä»£å˜…ã€‚é…åˆå‚³çµ±è³‡æ–™åº«ä½¿ç”¨ï¼Œå…ˆä¿‚æ­£ç¢ºå˜…å§¿å‹¢ã€‚</p>
        </div>
      </div>
    </div>

    <div class="tab-content" id="ai-viber">
      <div class="card">
        <h2>AI Viber</h2>
        <div class="subtitle">è¤‡è£½ Promptï¼Œè²¼å» AI å·¥å…·ï¼Œå³åˆ»é–‹å§‹ Build</div>

        <div class="prompt-card">
          <h4>Prompt 1 â€” å¯¦ä½œ Redis Caching Layer</h4>
          <div class="prompt-text" id="prompt1">å¹«æˆ‘å–º <span class="placeholder">[æŠ€è¡“æ£§ï¼Œä¾‹å¦‚ï¼šNode.js + Express / Python + FastAPI / Go + Gin]</span> é …ç›®å…¥é¢åŠ å…¥ Redis caching layerã€‚

å ´æ™¯ï¼š<span class="placeholder">[ä¾‹å¦‚ï¼šç”¨æˆ¶ profile é é¢ï¼Œæ¯æ¬¡éƒ½è¦ query database å¥½æ…¢]</span>

è¦æ±‚ï¼š
- ç”¨ Redis åš cache-aside patternï¼ˆå…ˆæŸ¥ cacheï¼Œmiss å…ˆ query DBï¼Œç„¶å¾Œå¯«å…¥ cacheï¼‰
- è¨­å®šåˆé©å˜… TTLï¼ˆTime To Liveï¼‰
- è™•ç† cache invalidationï¼ˆç•¶æ•¸æ“šæ›´æ–°æ™‚æ¸…é™¤å°æ‡‰ cacheï¼‰
- åŠ å…¥ cache hit/miss å˜… logging
- å¯«å‡ºå®Œæ•´å˜… codeï¼ŒåŒ…æ‹¬ Redis é€£æ¥è¨­å®š
- åŠ å…¥éŒ¯èª¤è™•ç†ï¼ˆRedis æ›å’—å˜…æ™‚å€™ fallback åˆ°ç›´æ¥ query DBï¼‰</div>
          <button class="copy-btn" onclick="copyPrompt('prompt1', this)">ğŸ“‹ è¤‡è£½</button>
        </div>

        <div class="prompt-card">
          <h4>Prompt 2 â€” è¨­è¨ˆ Redis Pub/Sub å³æ™‚é€šçŸ¥ç³»çµ±</h4>
          <div class="prompt-text" id="prompt2">å¹«æˆ‘ç”¨ Redis Pub/Sub è¨­è¨ˆä¸€å€‹å³æ™‚é€šçŸ¥ç³»çµ±ã€‚

æ‡‰ç”¨å ´æ™¯ï¼š<span class="placeholder">[ä¾‹å¦‚ï¼šå¤šäººå”ä½œæ–‡ä»¶ç·¨è¼¯å™¨ / å³æ™‚èŠå¤©å®¤ / éŠæˆ²æ’è¡Œæ¦œæ›´æ–°é€šçŸ¥]</span>

è¦æ±‚ï¼š
- ç”¨ Redis Pub/Sub åš message broker
- è¨­è¨ˆ channel å‘½åç­–ç•¥ï¼ˆä¾‹å¦‚ notifications:user:123ï¼‰
- å‰ç«¯ç”¨ WebSocket æ¥æ”¶å³æ™‚æ¨é€
- Backend ç”¨ <span class="placeholder">[Node.js / Python / Go]</span> å¯¦ä½œ
- è™•ç†ç”¨æˆ¶ä¸Šç·š/é›¢ç·šå˜… subscribe/unsubscribe
- è€ƒæ…® message æŒä¹…åŒ–ï¼ˆRedis Pub/Sub å””æœƒä¿ç•™ messageï¼Œé»æ¨£è™•ç†é›¢ç·šè¨Šæ¯ï¼‰
- å¯«å‡ºå®Œæ•´å˜… publisher åŒ subscriber code</div>
          <button class="copy-btn" onclick="copyPrompt('prompt2', this)">ğŸ“‹ è¤‡è£½</button>
        </div>

        <div class="prompt-card">
          <h4>Prompt 3 â€” Redis ä»»å‹™éšŠåˆ—å¯¦ä½œ</h4>
          <div class="prompt-text" id="prompt3">å¹«æˆ‘ç”¨ Redis List å¯¦ä½œä¸€å€‹ç°¡å–®å˜… task queue ç³»çµ±ã€‚

ç”¨é€”ï¼š<span class="placeholder">[ä¾‹å¦‚ï¼šç™¼é€ email éšŠåˆ— / åœ–ç‰‡å£“ç¸®è™•ç† / å ±è¡¨ç”Ÿæˆ]</span>

è¦æ±‚ï¼š
- ç”¨ Redis LPUSH + BRPOP åš producer-consumer pattern
- æ”¯æ´ task priorityï¼ˆé«˜å„ªå…ˆç´š task å…ˆè™•ç†ï¼‰
- åŠ å…¥ retry æ©Ÿåˆ¶ï¼ˆtask å¤±æ•—å¯ä»¥é‡è©¦æœ€å¤š 3 æ¬¡ï¼‰
- å¯¦ä½œ dead letter queueï¼ˆé‡è©¦ 3 æ¬¡ä»²å¤±æ•—å˜… task ç§»å» DLQï¼‰
- åŠ å…¥ task status trackingï¼ˆpending / processing / completed / failedï¼‰
- ç”¨ <span class="placeholder">[Node.js / Python]</span> å¯«å‡º producer åŒ consumer å˜…å®Œæ•´ code</div>
          <button class="copy-btn" onclick="copyPrompt('prompt3', this)">ğŸ“‹ è¤‡è£½</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const tabs = document.querySelectorAll('.tab-btn');
    const contents = document.querySelectorAll('.tab-content');
    tabs.forEach(tab => { tab.addEventListener('click', () => { tabs.forEach(t => t.classList.remove('active')); contents.forEach(c => c.classList.remove('active')); tab.classList.add('active'); document.getElementById(tab.dataset.tab)?.classList.add('active'); }); });

    function copyPrompt(id, btn) {
      const text = document.getElementById(id).innerText;
      navigator.clipboard.writeText(text).then(() => {
        btn.textContent = 'âœ… å·²è¤‡è£½';
        btn.classList.add('copied');
        setTimeout(() => { btn.textContent = 'ğŸ“‹ è¤‡è£½'; btn.classList.remove('copied'); }, 2000);
      });
    }
  </script>
</body>
</html>
