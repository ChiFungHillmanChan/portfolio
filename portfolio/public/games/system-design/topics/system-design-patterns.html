<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ç³»çµ±è¨­è¨ˆæ¨¡å¼ç¸½è¦½</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang HK", "Microsoft JhengHei", sans-serif; background: #0f1117; color: #e0e0e0; min-height: 100vh; }
    .container { max-width: 960px; margin: 0 auto; padding: 40px 24px; }
    header { text-align: center; margin-bottom: 40px; }
    header h1 { font-size: 2rem; font-weight: 700; color: #ffffff; margin-bottom: 8px; }
    header p { font-size: 1rem; color: #9ca3af; line-height: 1.6; }
    .card { background: #1a1d27; border-radius: 16px; padding: 32px; margin-bottom: 24px; border: 1px solid #2a2d3a; }
    .card h2 { font-size: 1.5rem; color: #ffffff; margin-bottom: 8px; }
    .card .subtitle { font-size: 0.95rem; color: #6366f1; font-weight: 500; margin-bottom: 16px; }
    .card p { font-size: 0.95rem; color: #c0c4cc; line-height: 1.8; margin-bottom: 12px; }
    .diagram-container { background: #13151c; border-radius: 12px; padding: 24px; margin: 24px 0; overflow-x: auto; border: 1px solid #2a2d3a; }
    .diagram-container svg { display: block; margin: 0 auto; max-width: 100%; height: auto; }
    .steps { list-style: none; padding: 0; margin: 16px 0; }
    .steps li { display: flex; align-items: flex-start; gap: 12px; padding: 12px 0; border-bottom: 1px solid #2a2d3a; font-size: 0.95rem; color: #c0c4cc; line-height: 1.6; }
    .steps li:last-child { border-bottom: none; }
    .step-num { flex-shrink: 0; width: 28px; height: 28px; border-radius: 50%; background: #6366f1; color: #fff; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; }
    .key-points { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 16px; }
    @media (max-width: 600px) { .key-points { grid-template-columns: 1fr; } .container { padding: 24px 16px; } header h1 { font-size: 1.5rem; } .card { padding: 20px; } }
    .key-point { background: #13151c; border-radius: 10px; padding: 16px; border-left: 3px solid #6366f1; }
    .key-point h4 { color: #a5b4fc; font-size: 0.9rem; margin-bottom: 6px; }
    .key-point p { font-size: 0.85rem; color: #c0c4cc; margin-bottom: 0; line-height: 1.6; }
    .use-case { background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(99, 102, 241, 0.05)); border-left: 3px solid #6366f1; border-radius: 0 10px 10px 0; padding: 16px 20px; margin-top: 16px; }
    .use-case h4 { color: #a5b4fc; font-size: 0.9rem; margin-bottom: 6px; }
    .use-case p { font-size: 0.9rem; color: #c0c4cc; margin-bottom: 0; }
    .tabs { display: flex; gap: 4px; background: #1a1d27; border-radius: 12px; padding: 4px; margin-bottom: 24px; overflow-x: auto; }
    .tab-btn { flex: 1; padding: 12px 16px; border: none; background: transparent; color: #9ca3af; font-size: 0.9rem; font-weight: 500; border-radius: 8px; cursor: pointer; transition: all 0.25s ease; white-space: nowrap; font-family: inherit; }
    .tab-btn:hover { color: #e0e0e0; background: rgba(255, 255, 255, 0.05); }
    .tab-btn.active { background: #6366f1; color: #ffffff; font-weight: 600; }
    .tab-content { display: none; animation: fadeIn 0.3s ease; }
    .tab-content.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
    /* AI Viber */
    .prompt-card { background: #13151c; border-radius: 12px; padding: 20px; margin-bottom: 16px; border: 1px solid #2a2d3a; }
    .prompt-card h4 { color: #a5b4fc; font-size: 0.95rem; margin-bottom: 12px; }
    .prompt-text { background: #0a0b10; border-radius: 8px; padding: 16px; font-size: 0.85rem; color: #c0c4cc; line-height: 1.8; white-space: pre-wrap; word-break: break-word; border: 1px solid #2a2d3a; position: relative; }
    .prompt-text .placeholder { color: #fbbf24; font-weight: 600; }
    .copy-btn { margin-top: 10px; padding: 8px 16px; background: #6366f1; color: #fff; border: none; border-radius: 8px; font-size: 0.8rem; cursor: pointer; font-family: inherit; transition: all 0.2s ease; }
    .copy-btn:hover { background: #4f46e5; }
    .copy-btn.copied { background: #10B981; }
  
    .related-topics { margin-top: 32px; }
    .related-topics h3 { color: #ffffff; font-size: 1.1rem; margin-bottom: 14px; }
    .related-links { display: flex; flex-wrap: wrap; gap: 10px; }
    .related-link { display: inline-block; padding: 8px 16px; background: #13151c; border: 1px solid #2a2d3a; border-radius: 20px; color: #a5b4fc; font-size: 0.85rem; text-decoration: none; transition: all 0.2s ease; }
    .related-link:hover { background: #6366f1; color: #ffffff; border-color: #6366f1; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ç³»çµ±è¨­è¨ˆæ¨¡å¼ç¸½è¦½</h1>
      <p>å¤§å¤šæ•¸ç³»çµ±éƒ½éµå¾ªç›¸åŒå˜…æ¨¡å¼ â€” æŒæ¡å‘¢å•²æ ¸å¿ƒæ¨¡å¼ï¼Œå°±å¯ä»¥æ‡‰å°çµ•å¤§éƒ¨åˆ†å˜…ç³»çµ±è¨­è¨ˆæŒ‘æˆ°</p>
    </header>

    <div class="tabs">
      <button class="tab-btn active" data-tab="tab-scale">æ“´å±•æ¨¡å¼</button>
      <button class="tab-btn" data-tab="tab-realtime">å¯¦æ™‚èˆ‡ç•°æ­¥</button>
      <button class="tab-btn" data-tab="tab-reliability">å¯é æ€§æ¨¡å¼</button>
      <button class="tab-btn" data-tab="ai-viber">â‘£ AI Viber</button>
    </div>

    <!-- ============ TAB 1: æ“´å±•æ¨¡å¼ ============ -->
    <div id="tab-scale" class="tab-content active">

      <div class="card">
        <h2>Scale Reads â€” æ“´å±•è®€å–</h2>
        <div class="subtitle">Caching / Read Replicas / Database Indexing</div>
        <p>ç•¶ç³»çµ±å˜…è®€å–æµé‡é å¤§æ–¼å¯«å…¥æµé‡æ™‚ï¼Œæ“´å±•è®€å–èƒ½åŠ›ä¿‚é¦–è¦ä»»å‹™ã€‚æ ¸å¿ƒç­–ç•¥æœ‰ä¸‰å€‹ï¼š</p>
        <ul class="steps">
          <li>
            <span class="step-num">1</span>
            <span><strong>Caching</strong> â€” å°‡é »ç¹è®€å–å˜…æ•¸æ“šæš«å­˜å–ºé«˜é€Ÿå­˜å„²å±¤ï¼ˆå¦‚ Redis / Memcachedï¼‰ï¼Œé¿å…æ¯æ¬¡éƒ½æŸ¥è©¢æ•¸æ“šåº«ã€‚é‡é»ä¿‚è¨­è¨ˆåˆç†å˜… Cache Invalidation ç­–ç•¥ã€‚</span>
          </li>
          <li>
            <span class="step-num">2</span>
            <span><strong>Read Replicas</strong> â€” å»ºç«‹æ•¸æ“šåº«å˜…åªè®€å‰¯æœ¬ï¼Œå°‡è®€å–è«‹æ±‚åˆ†æ•£åˆ°å¤šå€‹å‰¯æœ¬ä¸Šã€‚ä¸»åº«è² è²¬å¯«å…¥ï¼Œå‰¯æœ¬è² è²¬è®€å–ï¼Œæœ‰æ•ˆåˆ†æ“”è®€å–å£“åŠ›ã€‚</span>
          </li>
          <li>
            <span class="step-num">3</span>
            <span><strong>Database Indexing</strong> â€” ç‚ºå¸¸ç”¨æŸ¥è©¢å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œå¤§å¹…æ¸›å°‘æ•¸æ“šåº«æƒæå˜…æ•¸æ“šé‡ã€‚é—œéµåœ¨æ–¼æ€é¸æ­£ç¢ºå˜…å­—æ®µåŒé¿å…éåº¦ç´¢å¼•ã€‚</span>
          </li>
        </ul>
      </div>

      <div class="card">
        <h2>Scale Writes â€” æ“´å±•å¯«å…¥</h2>
        <div class="subtitle">Sharding / Batching / Asynchronous Writes</div>
        <p>ç•¶å¯«å…¥æµé‡æˆç‚ºç“¶é ¸æ™‚ï¼Œéœ€è¦é€éåˆ†æ•£åŒå»¶é²å¯«å…¥åšŸæå‡ååé‡ï¼š</p>
        <ul class="steps">
          <li>
            <span class="step-num">1</span>
            <span><strong>Sharding</strong> â€” å°‡æ•¸æ“šæŒ‰ç…§ç‰¹å®šè¦å‰‡ï¼ˆå¦‚ User IDï¼‰åˆ†ä½ˆåˆ°å¤šå€‹æ•¸æ“šåº«åˆ†ç‰‡ä¸Šï¼Œæ¯å€‹åˆ†ç‰‡åªè™•ç†ä¸€éƒ¨åˆ†æ•¸æ“šï¼Œå¾è€Œæ°´å¹³æ“´å±•å¯«å…¥èƒ½åŠ›ã€‚</span>
          </li>
          <li>
            <span class="step-num">2</span>
            <span><strong>Batching</strong> â€” å°‡å¤šå€‹å°å¯«å…¥åˆä½µæˆä¸€å€‹å¤§æ‰¹é‡å¯«å…¥æ“ä½œï¼Œæ¸›å°‘æ•¸æ“šåº«äº¤äº’æ¬¡æ•¸ï¼Œé¡¯è‘—æå‡å¯«å…¥æ•ˆç‡ã€‚</span>
          </li>
          <li>
            <span class="step-num">3</span>
            <span><strong>Asynchronous Writes</strong> â€” å¯«å…¥è«‹æ±‚å…ˆæ”¾å…¥éšŠåˆ—ï¼Œç”±å¾Œå° Worker ç•°æ­¥è™•ç†ã€‚å‰ç«¯å³æ™‚å›æ‡‰ç”¨æˆ¶ï¼Œå¯¦éš›å¯«å…¥å»¶é²å®Œæˆã€‚</span>
          </li>
        </ul>
      </div>

      <div class="card">
        <h2>CQRS â€” è®€å¯«åˆ†é›¢</h2>
        <div class="subtitle">Command Query Responsibility Segregation</div>
        <p>CQRS å˜…æ ¸å¿ƒæ¦‚å¿µä¿‚å°‡è®€å–ï¼ˆQueryï¼‰åŒå¯«å…¥ï¼ˆCommandï¼‰å˜…æ•¸æ“šæ¨¡å‹å®Œå…¨åˆ†é–‹ã€‚å¯«å…¥ç«¯ç”¨é‡å°å¯«å…¥å„ªåŒ–å˜…æ¨¡å‹ï¼Œè®€å–ç«¯ç”¨é‡å°æŸ¥è©¢å„ªåŒ–å˜…æ¨¡å‹ï¼Œå„å¸å…¶è·ã€‚</p>
        <p>å‘¢å€‹æ¨¡å¼ç‰¹åˆ¥é©ç”¨æ–¼è®€å¯«æ¯”ä¾‹å·®ç•°æ¥µå¤§ã€æˆ–è€…è®€å¯«æœ‰å””åŒæ€§èƒ½éœ€æ±‚å˜…ç³»çµ±ã€‚é‡é»ä¿‚ä¿æŒå…©å€‹æ¨¡å‹ä¹‹é–“å˜…æ•¸æ“šæœ€çµ‚ä¸€è‡´æ€§ï¼ˆEventual Consistencyï¼‰ã€‚</p>

        <div class="diagram-container">
          <svg viewBox="0 0 800 380" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="readGrad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#34d399" stop-opacity="0.25" />
                <stop offset="100%" stop-color="#1e293b" />
              </linearGradient>
              <linearGradient id="writeGrad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#f59e0b" stop-opacity="0.25" />
                <stop offset="100%" stop-color="#1e293b" />
              </linearGradient>
              <linearGradient id="cqrsGrad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#6366f1" stop-opacity="0.4" />
                <stop offset="100%" stop-color="#1e293b" />
              </linearGradient>
              <linearGradient id="clientGrad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#a5b4fc" stop-opacity="0.3" />
                <stop offset="100%" stop-color="#1e293b" />
              </linearGradient>
              <filter id="glowCqrs">
                <feGaussianBlur stdDeviation="6" result="blur" />
                <feMerge>
                  <feMergeNode in="blur" />
                  <feMergeNode in="SourceGraphic" />
                </feMerge>
              </filter>
              <filter id="shadow">
                <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.4" />
              </filter>
              <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#34d399" />
              </marker>
              <marker id="arrowAmber" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b" />
              </marker>
              <marker id="arrowIndigo" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#6366f1" />
              </marker>
            </defs>

            <!-- Client -->
            <rect x="320" y="20" width="160" height="50" rx="14" fill="url(#clientGrad)" stroke="#a5b4fc" stroke-width="1.5" filter="url(#shadow)" />
            <text x="400" y="50" text-anchor="middle" fill="#e0e0e0" font-size="14" font-weight="600">Client</text>

            <!-- CQRS Center Node (with glow) -->
            <rect x="325" y="120" width="150" height="55" rx="14" fill="url(#cqrsGrad)" stroke="#6366f1" stroke-width="2" filter="url(#glowCqrs)" />
            <text x="400" y="148" text-anchor="middle" fill="#a5b4fc" font-size="15" font-weight="700">CQRS</text>
            <text x="400" y="165" text-anchor="middle" fill="#9ca3af" font-size="10">Command / Query Split</text>

            <!-- Arrow: Client â†’ CQRS -->
            <path d="M400,70 C400,85 400,105 400,118" stroke="#a5b4fc" stroke-width="1.5" fill="none" marker-end="url(#arrowIndigo)" />

            <!-- READ side (left) -->
            <rect x="50" y="230" width="160" height="50" rx="14" fill="url(#readGrad)" stroke="#34d399" stroke-width="1.5" filter="url(#shadow)" />
            <text x="130" y="258" text-anchor="middle" fill="#34d399" font-size="13" font-weight="600">Read Model</text>

            <rect x="50" y="310" width="70" height="40" rx="14" fill="url(#readGrad)" stroke="#34d399" stroke-width="1" filter="url(#shadow)" />
            <text x="85" y="334" text-anchor="middle" fill="#c0c4cc" font-size="10">Cache</text>

            <rect x="140" y="310" width="70" height="40" rx="14" fill="url(#readGrad)" stroke="#34d399" stroke-width="1" filter="url(#shadow)" />
            <text x="175" y="334" text-anchor="middle" fill="#c0c4cc" font-size="10">Replicas</text>

            <!-- Arrow: CQRS â†’ Read Model -->
            <path d="M325,155 C250,160 180,200 130,228" stroke="#34d399" stroke-width="1.5" fill="none" marker-end="url(#arrowGreen)" />

            <!-- Arrow: Read Model â†’ Cache -->
            <path d="M100,280 C95,290 90,300 87,308" stroke="#34d399" stroke-width="1" fill="none" marker-end="url(#arrowGreen)" />

            <!-- Arrow: Read Model â†’ Replicas -->
            <path d="M160,280 C165,290 170,300 173,308" stroke="#34d399" stroke-width="1" fill="none" marker-end="url(#arrowGreen)" />

            <!-- WRITE side (right) -->
            <rect x="590" y="230" width="160" height="50" rx="14" fill="url(#writeGrad)" stroke="#f59e0b" stroke-width="1.5" filter="url(#shadow)" />
            <text x="670" y="258" text-anchor="middle" fill="#f59e0b" font-size="13" font-weight="600">Write Model</text>

            <rect x="590" y="310" width="70" height="40" rx="14" fill="url(#writeGrad)" stroke="#f59e0b" stroke-width="1" filter="url(#shadow)" />
            <text x="625" y="334" text-anchor="middle" fill="#c0c4cc" font-size="10">Sharding</text>

            <rect x="680" y="310" width="70" height="40" rx="14" fill="url(#writeGrad)" stroke="#f59e0b" stroke-width="1" filter="url(#shadow)" />
            <text x="715" y="334" text-anchor="middle" fill="#c0c4cc" font-size="10">Batching</text>

            <!-- Arrow: CQRS â†’ Write Model -->
            <path d="M475,155 C550,160 620,200 670,228" stroke="#f59e0b" stroke-width="1.5" fill="none" marker-end="url(#arrowAmber)" />

            <!-- Arrow: Write Model â†’ Sharding -->
            <path d="M640,280 C635,290 630,300 627,308" stroke="#f59e0b" stroke-width="1" fill="none" marker-end="url(#arrowAmber)" />

            <!-- Arrow: Write Model â†’ Batching -->
            <path d="M700,280 C705,290 710,300 713,308" stroke="#f59e0b" stroke-width="1" fill="none" marker-end="url(#arrowAmber)" />

            <!-- Sync arrow between Read and Write -->
            <path d="M215,255 C300,240 500,240 588,255" stroke="#6366f1" stroke-width="1" stroke-dasharray="6,4" fill="none" marker-end="url(#arrowIndigo)" />
            <text x="400" y="237" text-anchor="middle" fill="#9ca3af" font-size="10">Eventual Consistency</text>

            <!-- Labels -->
            <text x="130" y="220" text-anchor="middle" fill="#34d399" font-size="11" font-weight="500">Query Side</text>
            <text x="670" y="220" text-anchor="middle" fill="#f59e0b" font-size="11" font-weight="500">Command Side</text>
          </svg>
        </div>

        <div class="use-case">
          <h4>é©ç”¨å ´æ™¯</h4>
          <p>é›»å•†å¹³å°ï¼ˆå¤§é‡å•†å“ç€è¦½ vs å°‘é‡ä¸‹å–®å¯«å…¥ï¼‰ã€ç¤¾äº¤åª’é«”ï¼ˆå¤§é‡ Feed è®€å– vs å°‘é‡ç™¼å¸–å¯«å…¥ï¼‰ã€åˆ†æå ±è¡¨ç³»çµ±ï¼ˆè¤‡é›œæŸ¥è©¢ vs åŸå§‹æ•¸æ“šå¯«å…¥ï¼‰ã€‚</p>
        </div>
      </div>
    </div>

    <!-- ============ TAB 2: å¯¦æ™‚èˆ‡ç•°æ­¥ ============ -->
    <div id="tab-realtime" class="tab-content">

      <div class="card">
        <h2>Real-time Data â€” å¯¦æ™‚æ•¸æ“šå‚³è¼¸</h2>
        <div class="subtitle">WebSockets / Server-Sent Events / Long Polling</div>
        <p>ç•¶æ‡‰ç”¨éœ€è¦å³æ™‚æ¨é€æ•¸æ“šç•€å®¢æˆ¶ç«¯æ™‚ï¼Œæœ‰ä¸‰ç¨®ä¸»æµæ¨¡å¼å¯ä»¥æ€é¸ã€‚æ¯ç¨®æ¨¡å¼å„æœ‰å„ªåŠ£ï¼Œé—œéµåœ¨æ–¼æ ¹æ“šå…·é«”å ´æ™¯åšå‡ºå–æ¨ï¼š</p>

        <div class="key-points">
          <div class="key-point">
            <h4>WebSockets</h4>
            <p>å»ºç«‹å…¨é›™å·¥æŒä¹…é€£æ¥ï¼Œå®¢æˆ¶ç«¯åŒæœå‹™ç«¯å¯ä»¥éš¨æ™‚äº’ç›¸ç™¼é€æ•¸æ“šã€‚é©åˆéœ€è¦é›™å‘å¯¦æ™‚é€šè¨Šå˜…å ´æ™¯ï¼Œä¾‹å¦‚èŠå¤©å®¤ã€å¤šäººéŠæˆ²ã€å”ä½œç·¨è¼¯ã€‚</p>
          </div>
          <div class="key-point">
            <h4>Server-Sent Events (SSE)</h4>
            <p>æœå‹™ç«¯å–®å‘æ¨é€æ•¸æ“šç•€å®¢æˆ¶ç«¯å˜…è¼•é‡ç´šæ–¹æ¡ˆã€‚åŸºæ–¼ HTTPï¼Œè‡ªå‹•é‡é€£ï¼Œé©åˆé€šçŸ¥æ¨é€ã€å¯¦æ™‚è‚¡åƒ¹æ›´æ–°ç­‰åªéœ€è¦æœå‹™ç«¯æ¨é€å˜…å ´æ™¯ã€‚</p>
          </div>
          <div class="key-point">
            <h4>Long Polling</h4>
            <p>å®¢æˆ¶ç«¯ç™¼é€è«‹æ±‚å¾Œï¼Œæœå‹™ç«¯ä¿æŒé€£æ¥ç›´åˆ°æœ‰æ–°æ•¸æ“šå…ˆå›æ‡‰ã€‚å…¼å®¹æ€§æœ€å¥½ä½†æ•ˆç‡æœ€ä½ï¼Œé©åˆå””æ”¯æŒ WebSocket å˜…ç’°å¢ƒä½œç‚ºå¾Œå‚™æ–¹æ¡ˆã€‚</p>
          </div>
          <div class="key-point">
            <h4>é»æ¨£æ€é¸ï¼Ÿ</h4>
            <p>é›™å‘é€šè¨Šç”¨ WebSocketï¼›å–®å‘æ¨é€ç”¨ SSEï¼›å…¼å®¹æ€§å„ªå…ˆç”¨ Long Pollingã€‚å¤§éƒ¨åˆ†ç¾ä»£æ‡‰ç”¨æ¨è–¦ WebSocket é…åˆ SSE ä½œç‚ºé™ç´šæ–¹æ¡ˆã€‚</p>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Long-running Processes â€” é•·æ™‚é–“é‹è¡Œå˜…æµç¨‹</h2>
        <div class="subtitle">Message Queues / Worker Pools / Workflow Engines</div>
        <p>å¥½å¤šæ¥­å‹™æ“ä½œå””ä¿‚å³æ™‚å®Œæˆå˜… â€” å¯èƒ½éœ€è¦å¹¾ç§’ã€å¹¾åˆ†é˜ç”šè‡³å¹¾å€‹é˜ã€‚è™•ç†å‘¢é¡é•·æ™‚é–“é‹è¡Œå˜…æµç¨‹ï¼Œæ ¸å¿ƒæ¦‚å¿µä¿‚å°‡ä»»å‹™å¾ä¸»è«‹æ±‚æµç¨‹ä¸­åˆ†é›¢å‡ºåšŸï¼š</p>

        <div class="key-points">
          <div class="key-point">
            <h4>Message Queues</h4>
            <p>å°‡ä»»å‹™æ”¾å…¥éšŠåˆ—ï¼ˆå¦‚ RabbitMQã€Kafkaï¼‰ï¼Œç”±æ¶ˆè²»è€…ç•°æ­¥è™•ç†ã€‚è§£è€¦ç”Ÿç”¢è€…åŒæ¶ˆè²»è€…ï¼Œæä¾›ç·©è¡èƒ½åŠ›åŒé‡è©¦æ©Ÿåˆ¶ã€‚</p>
          </div>
          <div class="key-point">
            <h4>Worker Pools</h4>
            <p>ç¶­è­·ä¸€çµ„ Worker ç·šç¨‹æˆ–é€²ç¨‹ï¼Œå¾éšŠåˆ—ä¸­å–å‡ºä»»å‹™ä¸¦è¡Œè™•ç†ã€‚é‡é»ä¿‚æ§åˆ¶ä½µç™¼æ•¸é‡ï¼Œé¿å…è³‡æºè€—ç›¡åŒä¿è­‰ä»»å‹™å…¬å¹³åˆ†é…ã€‚</p>
          </div>
          <div class="key-point">
            <h4>Workflow Engines</h4>
            <p>ç®¡ç†è¤‡é›œå˜…å¤šæ­¥é©Ÿæµç¨‹ï¼ˆå¦‚ Temporalã€Airflowï¼‰ï¼Œæ”¯æŒç‹€æ…‹è¿½è¹¤ã€éŒ¯èª¤æ¢å¾©ã€æ¢ä»¶åˆ†æ”¯ã€‚é©åˆè·¨æœå‹™å˜…é•·æµç¨‹ç·¨æ’ã€‚</p>
          </div>
          <div class="key-point">
            <h4>å¸¸è¦‹çµ„åˆæ¨¡å¼</h4>
            <p>Message Queue + Worker Pool ä¿‚æœ€å¸¸è¦‹å˜…çµ„åˆã€‚å°æ–¼æ›´è¤‡é›œå˜…å ´æ™¯ï¼Œå†åŠ ä¸Š Workflow Engine åšæµç¨‹ç·¨æ’ï¼Œå½¢æˆå®Œæ•´å˜…ç•°æ­¥è™•ç†æ¶æ§‹ã€‚</p>
          </div>
        </div>

        <div class="use-case">
          <h4>å…¸å‹æ‡‰ç”¨</h4>
          <p>è¦–é »è½‰ç¢¼ï¼ˆä¸Šå‚³å¾Œæ’éšŠè™•ç†ï¼‰ã€é›»éƒµæ‰¹é‡ç™¼é€ï¼ˆWorker Pool ä¸¦è¡Œç™¼é€ï¼‰ã€è¨‚å–®è™•ç†æµç¨‹ï¼ˆWorkflow Engine ç·¨æ’æ”¯ä»˜ â†’ åº«å­˜ â†’ ç‰©æµï¼‰ã€‚</p>
        </div>
      </div>
    </div>

    <!-- ============ TAB 3: å¯é æ€§æ¨¡å¼ ============ -->
    <div id="tab-reliability" class="tab-content">

      <div class="card">
        <h2>Failures &amp; Reliability â€” æ•…éšœèˆ‡å¯é æ€§</h2>
        <div class="subtitle">Retries / Idempotency / Circuit Breakers / Self-healing</div>
        <p>åˆ†ä½ˆå¼ç³»çµ±å…¥é¢ï¼Œæ•…éšœä¿‚å¿…ç„¶æœƒç™¼ç”Ÿå˜…ã€‚é—œéµå””ä¿‚é¿å…æ•…éšœï¼Œè€Œä¿‚è¨­è¨ˆä¸€å¥—æ©Ÿåˆ¶ä»¤ç³»çµ±å–ºæ•…éšœç™¼ç”Ÿæ™‚èƒ½å¤ å„ªé›…æ‡‰å°ä¸¦è‡ªå‹•æ¢å¾©ã€‚</p>

        <div class="diagram-container">
          <svg viewBox="0 0 800 260" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="reqGrad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#a5b4fc" stop-opacity="0.3" />
                <stop offset="100%" stop-color="#1e293b" />
              </linearGradient>
              <linearGradient id="retryGrad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#f59e0b" stop-opacity="0.3" />
                <stop offset="100%" stop-color="#1e293b" />
              </linearGradient>
              <linearGradient id="cbGrad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#f87171" stop-opacity="0.3" />
                <stop offset="100%" stop-color="#1e293b" />
              </linearGradient>
              <linearGradient id="healGrad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#6366f1" stop-opacity="0.3" />
                <stop offset="100%" stop-color="#1e293b" />
              </linearGradient>
              <linearGradient id="successGrad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#34d399" stop-opacity="0.35" />
                <stop offset="100%" stop-color="#1e293b" />
              </linearGradient>
              <filter id="shadowR">
                <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.4" />
              </filter>
              <filter id="glowSuccess">
                <feGaussianBlur stdDeviation="5" result="blur" />
                <feMerge>
                  <feMergeNode in="blur" />
                  <feMergeNode in="SourceGraphic" />
                </feMerge>
              </filter>
              <marker id="arwAmber" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b" />
              </marker>
              <marker id="arwRed" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#f87171" />
              </marker>
              <marker id="arwIndigo2" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#6366f1" />
              </marker>
              <marker id="arwGreen" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#34d399" />
              </marker>
            </defs>

            <!-- Request -->
            <rect x="20" y="90" width="120" height="55" rx="14" fill="url(#reqGrad)" stroke="#a5b4fc" stroke-width="1.5" filter="url(#shadowR)" />
            <text x="80" y="122" text-anchor="middle" fill="#e0e0e0" font-size="13" font-weight="600">Request</text>

            <!-- Retry with Backoff -->
            <rect x="190" y="90" width="140" height="55" rx="14" fill="url(#retryGrad)" stroke="#f59e0b" stroke-width="1.5" filter="url(#shadowR)" />
            <text x="260" y="114" text-anchor="middle" fill="#f59e0b" font-size="12" font-weight="600">Retry</text>
            <text x="260" y="132" text-anchor="middle" fill="#c0c4cc" font-size="10">with Backoff</text>

            <!-- Circuit Breaker -->
            <rect x="380" y="90" width="140" height="55" rx="14" fill="url(#cbGrad)" stroke="#f87171" stroke-width="1.5" filter="url(#shadowR)" />
            <text x="450" y="114" text-anchor="middle" fill="#f87171" font-size="12" font-weight="600">Circuit Breaker</text>
            <text x="450" y="132" text-anchor="middle" fill="#c0c4cc" font-size="10">Open / Half / Closed</text>

            <!-- Self-healing -->
            <rect x="570" y="90" width="120" height="55" rx="14" fill="url(#healGrad)" stroke="#6366f1" stroke-width="1.5" filter="url(#shadowR)" />
            <text x="630" y="122" text-anchor="middle" fill="#a5b4fc" font-size="12" font-weight="600">Self-healing</text>

            <!-- Success -->
            <rect x="735" y="90" width="50" height="55" rx="14" fill="url(#successGrad)" stroke="#34d399" stroke-width="1.5" filter="url(#glowSuccess)" />
            <text x="760" y="122" text-anchor="middle" fill="#34d399" font-size="11" font-weight="700">OK</text>

            <!-- Arrows -->
            <path d="M140,117 C155,117 170,117 188,117" stroke="#f59e0b" stroke-width="1.5" fill="none" marker-end="url(#arwAmber)" />
            <path d="M330,117 C345,117 360,117 378,117" stroke="#f87171" stroke-width="1.5" fill="none" marker-end="url(#arwRed)" />
            <path d="M520,117 C535,117 550,117 568,117" stroke="#6366f1" stroke-width="1.5" fill="none" marker-end="url(#arwIndigo2)" />
            <path d="M690,117 C700,117 715,117 733,117" stroke="#34d399" stroke-width="1.5" fill="none" marker-end="url(#arwGreen)" />

            <!-- Retry loop arrow -->
            <path d="M260,90 C260,55 210,40 200,60 C192,75 220,88 240,90" stroke="#f59e0b" stroke-width="1" stroke-dasharray="4,3" fill="none" marker-end="url(#arwAmber)" />
            <text x="220" y="48" text-anchor="middle" fill="#9ca3af" font-size="9">Exponential Backoff</text>

            <!-- Labels below -->
            <text x="80" y="170" text-anchor="middle" fill="#9ca3af" font-size="10">ç™¼èµ·è«‹æ±‚</text>
            <text x="260" y="170" text-anchor="middle" fill="#9ca3af" font-size="10">å¤±æ•—é‡è©¦</text>
            <text x="450" y="170" text-anchor="middle" fill="#9ca3af" font-size="10">ç†”æ–·ä¿è­·</text>
            <text x="630" y="170" text-anchor="middle" fill="#9ca3af" font-size="10">è‡ªå‹•æ¢å¾©</text>
            <text x="760" y="170" text-anchor="middle" fill="#9ca3af" font-size="10">æˆåŠŸ</text>
          </svg>
        </div>

        <div class="key-points">
          <div class="key-point">
            <h4>Retry with Exponential Backoff</h4>
            <p>æ¯æ¬¡é‡è©¦ä¹‹é–“ç­‰å¾…å˜…æ™‚é–“æŒ‡æ•¸éå¢ï¼ˆä¾‹å¦‚ 1s â†’ 2s â†’ 4s â†’ 8sï¼‰ï¼Œé¿å…å°å·²ç¶“éè¼‰å˜…æœå‹™é€ æˆæ›´å¤§å£“åŠ›ã€‚é€šå¸¸åŠ å…¥ Jitterï¼ˆéš¨æ©Ÿåç§»ï¼‰é˜²æ­¢é‡è©¦é¢¨æš´ã€‚</p>
          </div>
          <div class="key-point">
            <h4>Idempotencyï¼ˆå†ªç­‰æ€§ï¼‰</h4>
            <p>ç¢ºä¿åŒä¸€å€‹æ“ä½œåŸ·è¡Œå¤šæ¬¡åŒåŸ·è¡Œä¸€æ¬¡æ•ˆæœç›¸åŒã€‚å¸¸è¦‹åšæ³•ä¿‚ç”¨ Idempotency Keyï¼Œæœå‹™ç«¯è¨˜éŒ„å·²è™•ç†å˜…è«‹æ±‚ IDï¼Œé‡è¤‡è«‹æ±‚ç›´æ¥è¿”å›ä¹‹å‰å˜…çµæœã€‚</p>
          </div>
          <div class="key-point">
            <h4>Circuit Breakerï¼ˆç†”æ–·å™¨ï¼‰</h4>
            <p>ç›£æ§ä¸‹æ¸¸æœå‹™å˜…å¤±æ•—ç‡ï¼Œç•¶å¤±æ•—ç‡è¶…éé–¾å€¼æ™‚ã€Œæ–·è·¯ã€åœæ­¢è«‹æ±‚ï¼Œé¿å…é€£é–æ•…éšœã€‚ç¶“éä¸€æ®µå†·å»æœŸå¾Œé€²å…¥ Half-Open ç‹€æ…‹å˜—è©¦æ¢å¾©ã€‚</p>
          </div>
          <div class="key-point">
            <h4>Self-healingï¼ˆè‡ªæˆ‘ä¿®å¾©ï¼‰</h4>
            <p>ç³»çµ±å…·å‚™è‡ªå‹•åµæ¸¬ç•°å¸¸åŒæ¢å¾©å˜…èƒ½åŠ›ã€‚å¸¸è¦‹æ‰‹æ®µåŒ…æ‹¬ï¼šå¥åº·æª¢æŸ¥ï¼ˆHealth Checkï¼‰ã€è‡ªå‹•é‡å•Ÿå¤±æ•—å˜…æœå‹™å¯¦ä¾‹ã€è‡ªå‹•æ“´å®¹æ‡‰å°æµé‡çªå¢ã€‚</p>
          </div>
        </div>

        <div class="use-case">
          <h4>å¯¦éš›æ‡‰ç”¨å ´æ™¯</h4>
          <p>æ”¯ä»˜ç³»çµ±ï¼ˆIdempotency Key é˜²æ­¢é‡è¤‡æ‰£æ¬¾ï¼‰ã€å¾®æœå‹™æ¶æ§‹ï¼ˆCircuit Breaker é˜²æ­¢é›ªå´©æ•ˆæ‡‰ï¼‰ã€Kubernetesï¼ˆSelf-healing è‡ªå‹•é‡å•Ÿ crashed podsï¼‰ã€API Gatewayï¼ˆRetry + Backoff è™•ç†ç¬æ™‚æ•…éšœï¼‰ã€‚</p>
        </div>
      </div>
    </div>

    <div class="tab-content" id="ai-viber">
      <div class="card">
        <h2>AI Viber</h2>
        <div class="subtitle">è¤‡è£½ Promptï¼Œè²¼å» AI å·¥å…·ï¼Œå³åˆ»é–‹å§‹ Build</div>

        <div class="prompt-card">
          <h4>Prompt 1 â€” å°‡è¨­è¨ˆæ¨¡å¼æ‡‰ç”¨åˆ°å¯¦éš›é …ç›®</h4>
          <div class="prompt-text" id="prompt1">åˆ†æ <span class="placeholder">[é …ç›®åç¨±ï¼Œä¾‹å¦‚ï¼šç¤¾äº¤åª’é«”å¹³å°]</span> å˜…æ¶æ§‹éœ€æ±‚ï¼Œæ¨è–¦æœ€é©åˆå˜…ç³»çµ±è¨­è¨ˆæ¨¡å¼çµ„åˆã€‚

é …ç›®æ¦‚æ³ï¼š
- é è¨ˆç”¨æˆ¶é‡ï¼š<span class="placeholder">[ä¾‹å¦‚ï¼š100 è¬æ—¥æ´»ç”¨æˆ¶]</span>
- è®€å¯«æ¯”ä¾‹ï¼š<span class="placeholder">[ä¾‹å¦‚ï¼šè®€å–ä½” 90%ï¼Œå¯«å…¥ä½” 10%]</span>
- æ ¸å¿ƒåŠŸèƒ½ï¼š<span class="placeholder">[ä¾‹å¦‚ï¼šFeed æµã€å³æ™‚é€šè¨Šã€é€šçŸ¥æ¨é€ã€æœç´¢]</span>

è«‹é‡å°æ¯å€‹æ ¸å¿ƒåŠŸèƒ½ï¼Œæ¨è–¦é©ç”¨å˜…è¨­è¨ˆæ¨¡å¼ä¸¦è§£é‡‹åŸå› ï¼š

1. æ“´å±•æ¨¡å¼ï¼ˆScale Reads / Scale Writes / CQRSï¼‰ï¼š
   - é‚Šå€‹åŠŸèƒ½é©åˆç”¨é‚Šå€‹æ¨¡å¼ï¼Ÿ
   - Caching ç­–ç•¥é»è¨­è¨ˆï¼ŸCache Invalidation ç”¨å’©æ–¹å¼ï¼Ÿ
   - éœ€å””éœ€è¦åš Shardingï¼Ÿç”¨å’© Sharding Keyï¼Ÿ

2. å¯¦æ™‚èˆ‡ç•°æ­¥æ¨¡å¼ï¼š
   - å³æ™‚åŠŸèƒ½ç”¨ WebSocket å®š SSEï¼Ÿ
   - é•·æµç¨‹ä»»å‹™ç”¨å’© Message Queueï¼Ÿ
   - Worker Pool å˜…ä½µç™¼æ•¸é»æ¨£è¨­å®šï¼Ÿ

3. å¯é æ€§æ¨¡å¼ï¼š
   - é‚Šå•² API éœ€è¦ Idempotencyï¼Ÿ
   - Circuit Breaker åŠ å–ºé‚Šå•²æœå‹™ä¹‹é–“ï¼Ÿ
   - Self-healing æ©Ÿåˆ¶é»è¨­è¨ˆï¼Ÿ

æœ€å¾Œè¼¸å‡ºä¸€ä»½å®Œæ•´å˜…æ¶æ§‹è¨­è¨ˆæ–‡ä»¶ï¼ŒåŒ…å«æŠ€è¡“é¸å‹åŒ Trade-off åˆ†æã€‚</div>
          <button class="copy-btn" onclick="copyPrompt('prompt1', this)">ğŸ“‹ è¤‡è£½</button>
        </div>

        <div class="prompt-card">
          <h4>Prompt 2 â€” æ¶æ§‹æ¨¡å¼é¸æ“‡æ±ºç­–æŒ‡å—</h4>
          <div class="prompt-text" id="prompt2">å»ºç«‹ä¸€ä»½ã€Œæ¶æ§‹æ¨¡å¼é¸æ“‡æ±ºç­–æŒ‡å—ã€ï¼Œå¹«åŠ©å–º <span class="placeholder">[å ´æ™¯ï¼Œä¾‹å¦‚ï¼šMonolith è½‰ Microservices éç¨‹ä¸­]</span> åšå‡ºæ­£ç¢ºå˜…æŠ€è¡“æ±ºç­–ã€‚

è«‹é‡å°ä»¥ä¸‹æ¯å°æ¶æ§‹é¸æ“‡ï¼Œè¼¸å‡ºè©³ç´°å˜…å°æ¯”åˆ†æï¼š

1. Monolith vs Microservices
   - åœ˜éšŠè¦æ¨¡å–ºå¹¾å¤šäººä»¥ä¸‹é©åˆ Monolithï¼Ÿ
   - å’©æ™‚å€™å…ˆçœŸæ­£éœ€è¦æ‹†åˆ†å¾®æœå‹™ï¼Ÿ
   - æ‹†åˆ†å˜…å…·é«”æ­¥é©ŸåŒé¢¨éšª

2. SQL vs NoSQL
   - æ ¹æ“šæ•¸æ“šæ¨¡å‹é»æ€ï¼Ÿ
   - éœ€è¦ ACID Transaction å˜…å ´æ™¯ç”¨å’©ï¼Ÿ
   - å¯ä»¥æ··åˆä½¿ç”¨å˜…æœ€ä½³å¯¦è¸

3. Synchronous vs Asynchronous Communication
   - é‚Šå•² API ä¸€å®šè¦åŒæ­¥ï¼Ÿ
   - å¼•å…¥ Message Queue å˜…åˆ¤æ–·æ¨™æº–
   - Event-Driven Architecture å˜…é©ç”¨æ¢ä»¶

4. Cache-Aside vs Write-Through vs Write-Behind
   - æ¯ç¨®ç­–ç•¥å˜…ä¸€è‡´æ€§ä¿è­‰
   - æ ¹æ“šè®€å¯«æ¯”ä¾‹é»æ€ï¼Ÿ

æ¯å€‹æ±ºç­–é»éƒ½éœ€è¦ï¼š
- æ±ºç­–æµç¨‹åœ–ï¼ˆç”¨æ–‡å­—æè¿° If-Else é‚è¼¯ï¼‰
- çœŸå¯¦æ¡ˆä¾‹ï¼ˆé‚Šé–“å…¬å¸ç”¨å’—é‚Šå€‹æ–¹æ¡ˆã€é»è§£ï¼‰
- å¸¸è¦‹è¸©å‘åŒé¿å…æ–¹æ³•</div>
          <button class="copy-btn" onclick="copyPrompt('prompt2', this)">ğŸ“‹ è¤‡è£½</button>
        </div>
      </div>
    </div>

    <div class="related-topics">
      <div class="card">
        <h3>ç›¸é—œèª²é¡Œ</h3>
        <div class="related-links">
        <a href="database-basics.html" class="related-link">Database åŸºç¤</a>
        <a href="message-queue.html" class="related-link">Message Queue æ¶ˆæ¯éšŠåˆ—</a>
        <a href="load-balancer.html" class="related-link">Load Balancer è² è¼‰å‡è¡¡å™¨</a>
        <a href="api-gateway.html" class="related-link">API Gateway ç¶²é—œ</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    const tabs = document.querySelectorAll('.tab-btn');
    const contents = document.querySelectorAll('.tab-content');
    tabs.forEach(tab => { tab.addEventListener('click', () => { tabs.forEach(t => t.classList.remove('active')); contents.forEach(c => c.classList.remove('active')); tab.classList.add('active'); document.getElementById(tab.dataset.tab)?.classList.add('active'); }); });

    function copyPrompt(id, btn) {
      const text = document.getElementById(id).innerText;
      navigator.clipboard.writeText(text).then(() => {
        btn.textContent = 'âœ… å·²è¤‡è£½';
        btn.classList.add('copied');
        setTimeout(() => { btn.textContent = 'ğŸ“‹ è¤‡è£½'; btn.classList.remove('copied'); }, 2000);
      });
    }
  </script>
</body>
</html>
